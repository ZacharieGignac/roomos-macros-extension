{"version":3,"sources":["../node_modules/events/events.js","../node_modules/loglevel/lib/loglevel.js","log.ts","backend/ws.ts","../node_modules/requires-port/index.js","../node_modules/querystringify/index.js","../node_modules/url-parse/index.js","connect.ts","../node_modules/base64-js/index.js","../node_modules/ieee754/index.js","../node_modules/isarray/index.js","../node_modules/node-libs-browser/node_modules/buffer/index.js","transport/ws.ts","xapi/normalizePath.ts","xapi/exc.ts","xapi/rpc.ts","version.ts","xapi/mixins.ts","xapi/components.ts","xapi/feedback.ts","xapi/proxy.ts","xapi/index.ts","browser.ts"],"names":["R","Reflect","ReflectApply","apply","target","receiver","args","Function","prototype","call","ReflectOwnKeys","ownKeys","Object","getOwnPropertySymbols","getOwnPropertyNames","concat","ProcessEmitWarning","warning","console","warn","NumberIsNaN","Number","isNaN","value","EventEmitter","init","module","exports","once","_events","undefined","_eventsCount","_maxListeners","defaultMaxListeners","checkListener","listener","TypeError","defineProperty","enumerable","get","set","arg","RangeError","getPrototypeOf","create","setMaxListeners","n","_getMaxListeners","that","getMaxListeners","emit","type","i","arguments","length","push","doError","events","error","er","Error","err","message","context","handler","len","listeners","arrayClone","_addListener","prepend","m","existing","newListener","unshift","warned","w","String","name","emitter","count","addListener","on","prependListener","onceWrapper","fired","removeListener","wrapFn","_onceWrap","state","wrapped","bind","prependOnceListener","list","position","originalListener","shift","spliceOne","off","removeAllListeners","keys","key","_listeners","unwrap","evlistener","unwrapListeners","rawListeners","listenerCount","eventNames","arr","copy","Array","index","pop","ret","Promise","resolve","reject","errorListener","resolver","slice","eventTargetAgnosticAddListener","addErrorHandlerIfEventEmitter","flags","addEventListener","wrapListener","removeEventListener","root","definition","define","amd","log","noop","undefinedType","isIE","window","navigator","test","userAgent","logMethods","_loggersByName","defaultLogger","bindMethod","obj","methodName","method","e","traceForIE","trace","realMethod","replaceLoggingMethods","level","getLevel","methodFactory","debug","levels","SILENT","enableLoggingWhenConsoleArrives","defaultMethodFactory","_level","_loggerName","Logger","factory","self","inheritedLevel","defaultLevel","userLevel","storageKey","persistLevelIfPossible","levelNum","levelName","toUpperCase","localStorage","ignore","document","cookie","encodeURIComponent","getPersistedLevel","storedLevel","cookieName","location","indexOf","exec","clearPersistedLevel","removeItem","normalizeLevel","input","setLevel","persist","setDefaultLevel","resetLevel","enableAll","TRACE","disableAll","rebuild","childName","initialLevel","getLogger","logger","_log","noConflict","getLoggers"],"mappings":"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AC,CAAC,EAAA;MAC3B,YAAY,GAAG,CAAC;IAClB,CAAC,CAAC;IACF,KAAI,CAAC,EAAE,CAAC,MAAM,GAAG,YAAA;MACf,KAAI,CAAC,IAAI,CAAC,OAAO,CAAC;MAClB,YAAY,CAAC,IAAI,CAAC;IACpB,CAAC;;EACH;EAEO,SAAA,CAAA,SAAA,CAAA,KAAK,GAAZ,YAAA;IACE,IAAI,CAAC,EAAE,CAAC,KAAK,CAAA,CAAE;EACjB,CAAC;EAEM,SAAA,CAAA,SAAA,CAAA,OAAO,GAAd,UAAe,OAAoB,EAAA;IAAnC,IAAA,KAAA,GAAA,IAAA;IACE,OAAO,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,YAAA;MACvB,KAAA,CAAA,OAAG,CAAC,KAAK,CAAC,sBAAsB,EAAE,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;MAC1D,KAAI,CAAC,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;IACvC,CAAC,CAAC;EACJ,CAAC;EAmBH,OAAA,SAAC;AAAD,CA1DA,CAAuC,QAAA,CAAA,YAAY,CAAA;;;ACtBnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACtHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;AC7kBA,IAAA,WAAA,GAAA,eAAA,CAAA,OAAA,CAAA,WAAA,CAAA,CAAA;AAGA,IAAA,KAAA,GAAA,eAAA,CAAA,OAAA,CAAA,OAAA,CAAA,CAAA;AAIa,OAAA,CAAA,cAAc,GAAY;EACrC,OAAO,EAAE,EAAE;EACX,IAAI,EAAE,EAAE;EACR,QAAQ,EAAE,MAAM;EAChB,QAAQ,EAAE,EAAE;EACZ,IAAI,EAAE,CAAC;EACP,QAAQ,EAAE,EAAE;EACZ,QAAQ,EAAE;CACX;AAOD,SAAS,cAAc,CACrB,cAAgC,EAChC,GAAW,EACX,OAAgB,EAAA;EAEhB,IAAM,QAAQ,GAAA,QAAA,CAAA,QAAA,CAAA,CAAA,CAAA,EACT,OAAA,CAAA,cAAc,CAAA,EACd,cAAc,CAClB;EAED,IAAM,YAAY,GAAG,GAAG,CAAC,KAAK,CAAC,WAAW,CAAC,GACvC,GAAG,GACA,QAAQ,CAAC,QAAQ,GAAA,IAAA,GAAK,GAAK;EAClC,IAAM,SAAS,GAAG,IAAI,WAAA,CAAA,OAAG,CAAC,YAAY,CAAC;EAEvC,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,OAAO,CAAC,UAAC,GAAG,EAAA;IAChC,IAAM,KAAK,GAAG,CACX,OAAe,CAAC,GAAG,CAAC,EACrB,GAAG,KAAK,MAAM,GAAG,SAAS,CAAC,QAAQ,GAAI,SAAiB,CAAC,GAAG,CAAC,CAC9D,CAAC,MAAM,CAAC,UAAC,CAAC,EAAA;MAAK,OAAA,CAAC,CAAC,CAAC;IAAH,CAAG,CAAC,CAAC,CAAC,CAAC;IACvB,IAAI,KAAK,EAAE;MACR,QAAgB,CAAC,GAAG,CAAC,GAAG,KAAK;;EAElC,CAAC,CAAC;EAEF,OAAO,QAAQ;AACjB;AAEA,SAAwB,eAAe,CACrC,WAAwB,EACxB,QAA0B,EAAA;EAE1B,OAAO,UAAC,IAAI,EAAA;IAAK,OAAA,YAAA;MAAC,IAAA,IAAA,GAAA,EAAA;WAAA,IAAA,EAAA,GAAA,CAAc,EAAd,EAAA,GAAA,SAAA,CAAA,MAAc,EAAd,EAAA,EAAc,EAAA;QAAd,IAAA,CAAA,EAAA,CAAA,GAAA,SAAA,CAAA,EAAA,CAAA;;MAChB,IAAI,GAAW;MACf,IAAI,OAAgB;MAEpB,IAAI,IAAI,CAAC,MAAM,KAAK,CAAC,IAAI,OAAA,CAAO,IAAI,CAAC,CAAC,CAAC,MAAK,QAAQ,EAAE;QACpD,OAAO,GAAG,IAAI,CAAC,CAAC,CAAC;QACjB,GAAG,GAAG,EAAE;OACT,MAAM,IAAI,IAAI,CAAC,MAAM,KAAK,CAAC,IAAI,OAAO,IAAI,CAAC,CAAC,CAAC,KAAK,QAAQ,EAAE;QAC3D,OAAO,GAAG,OAAA,CAAA,cAAc;QACxB,GAAG,GAAG,IAAI,CAAC,CAAC,CAAC;OACd,MAAM,IAAI,IAAI,CAAC,MAAM,KAAK,CAAC,EAAE;QAC5B,GAAG,GAAG,IAAI,CAAC,CAAC,CAAC;QACb,OAAO,GAAG,IAAI,CAAC,CAAC,CAAC;OAClB,MAAM;QACL,MAAM,IAAI,KAAK,CAAC,8BAA8B,CAAC;;MAGjD,IAAM,IAAI,GAAG,cAAc,CAAC,QAAQ,EAAE,GAAG,EAAE,OAAO,CAAC;MAEnD,KAAA,CAAA,OAAG,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC;MAC3B,KAAA,CAAA,OAAG,CAAC,KAAK,CAAC,gBAAgB,EAAE,IAAI,CAAC;MACjC,KAAA,CAAA,OAAG,CAAC,IAAI,CAAC,eAAe,EAAE,GAAG,CAAC;MAE9B,IAAM,OAAO,GAAG,WAAW,CAAC,IAAI,CAAC;MACjC,OAAO,IAAI,IAAI,CAAC,OAAO,CAAC;IAC1B,CAAC;EAzBgB,CAyBhB;AACH;AA9BA,OAAA,CAAA,OAAA,GAAA,eAAA;;AClDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrFA;AACA;AACA;AACA;AACA;AACA;;;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AC7vDA,IAAA,WAAA,GAAA,eAAA,CAAA,OAAA,CAAA,WAAA,CAAA,CAAA;AAEA,IAAA,QAAA,GAAA,OAAA,CAAA,QAAA,CAAA;AAKA,SAAS,SAAS,CAAC,KAAa,EAAA;EAC9B,OAAQ,OAAO,IAAI,KAAK,UAAU,GAC9B,IAAI,CAAC,KAAK,CAAC,GACX,QAAA,CAAA,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,QAAQ,CAAC,QAAQ,CAAC;AAC3C;AAEA,SAAS,oBAAoB,CAAC,QAAgB,EAAE,QAAgB,EAAA;EAC9D,IAAM,YAAY,GAAQ;IAAE,GAAG,EAAE,GAAG;IAAE,GAAG,EAAE,GAAG;IAAE,GAAG,EAAE;EAAE,CAAE;EACzD,IAAM,QAAQ,GAAG,QAAA,CAAA,MAAM,CACpB,IAAI,CAAI,QAAQ,GAAA,GAAA,GAAI,QAAU,CAAC,CAC/B,QAAQ,CAAC,QAAQ,CAAC,CAClB,OAAO,CAAC,QAAQ,EAAE,UAAC,CAAC,EAAA;IAAK,OAAA,YAAY,CAAC,CAAC,CAAC;EAAf,CAAe,CAAC;EAC5C,OAAO,OAAA,GAAQ,QAAU;AAC3B;AAEA,SAAwB,gBAAgB,CAAC,eAAgC,EAAE,IAAa,EAAA;EAC9E,IAAA,IAAI,GAAyC,IAAI,CAAA,IAA7C;IAAE,QAAQ,GAA+B,IAAI,CAAA,QAAnC;IAAE,QAAQ,GAAqB,IAAI,CAAA,QAAzB;IAAE,IAAI,GAAe,IAAI,CAAA,IAAnB;IAAE,QAAQ,GAAK,IAAI,CAAA,QAAT;EAChD,IAAM,GAAG,GAAG,IAAI,WAAA,CAAA,OAAG,CAAC,EAAE,CAAC;EACvB,GAAG,CAAC,GAAG,CAAC,UAAU,EAAE,KAAK,CAAC;EAC1B,GAAG,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,CAAC;EACrB,GAAG,CAAC,GAAG,CAAC,UAAU,EAAE,QAAQ,CAAC;EAC7B,GAAG,CAAC,GAAG,CAAC,MAAM,EAAE,EAAA,GAAG,IAAM,CAAC;EAE1B,IAAM,IAAI,GAAG,oBAAoB,CAAC,QAAQ,EAAE,QAAQ,CAAC;EACrD,OAAO,eAAe,CAAC,GAAG,CAAC,IAAI,EAAE,IAAI,CAAC;AACxC;AAVA,OAAA,CAAA,OAAA,GAAA,gBAAA;;;;;;;ACZA,SAAwB,aAAa,CAAC,IAAU,EAAA;EAC9C,IAAM,KAAK,GAAG,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC;EAC/D,OAAO,CAAC,KAAK,GACT,EAAE,GACF,KAAK,CAAC,GAAG,CAAC,UAAC,OAAO,EAAA;IAChB,IAAI,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE;MACzB,OAAO,QAAQ,CAAC,OAAO,EAAE,EAAE,CAAC;;IAE9B,OAAO,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,WAAW,CAAA,CAAE,GAAG,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC;EAC3D,CAAC,CAAC;AACR;AAVA,OAAA,CAAA,OAAA,GAAA,aAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACVa,OAAA,CAAA,aAAa,GAAG,CAAC;AACjB,OAAA,CAAA,aAAa,GAAG,CAAC;AACjB,OAAA,CAAA,aAAa,GAAG,CAAC;AACjB,OAAA,CAAA,YAAY,GAAG,CAAC;AAChB,OAAA,CAAA,eAAe,GAAG,CAAC;AACnB,OAAA,CAAA,gBAAgB,GAAG,CAAC;AACpB,OAAA,CAAA,cAAc,GAAG,CAAC;AAClB,OAAA,CAAA,gBAAgB,GAAG,CAAC,KAAK;AAEtC,IAAA,SAAA,GAAA,UAAA,MAAA,EAAA;EAA+B,SAAA,CAAA,SAAA,EAAA,MAAA,CAAA;EAG7B,SAAA,SAAA,CAAqB,IAAY,EAAE,MAAc,EAAE,IAAU,EAAA;IAA7D,IAAA,KAAA,GACE,MAAA,CAAA,IAAA,CAAA,IAAA,EAAM,MAAM,CAAC,IAAA,IAAA;IADM,KAAA,CAAA,IAAI,GAAJ,IAAI;IAEvB,MAAM,CAAC,cAAc,CAAC,KAAI,EAAE,SAAS,CAAC,SAAS,CAAC;IAChD,IAAI,IAAI,KAAK,SAAS,EAAE;MACtB,KAAI,CAAC,IAAI,GAAG,IAAI;;IAGlB,IAAI,OAAO,MAAM,KAAK,QAAQ,EAAE;MAC9B,MAAM,IAAI,KAAK,CAAC,uCAAuC,CAAC;;IAG1D,IAAI,OAAO,IAAI,KAAK,QAAQ,EAAE;MAC5B,MAAM,IAAI,KAAK,CAAC,2CAA2C,CAAC;;;EAEhE;EACF,OAAA,SAAC;AAAD,CAlBA,CAA+B,KAAK,CAAA;AAAvB,OAAA,CAAA,SAAA,GAAA,SAAA;AAoBb,IAAA,iBAAA,GAAA,UAAA,MAAA,EAAA;EAAuC,SAAA,CAAA,iBAAA,EAAA,MAAA,CAAA;EACrC,SAAA,iBAAA,CAAY,MAAc,EAAA;IAA1B,IAAA,KAAA,GACE,MAAA,CAAA,IAAA,CAAA,IAAA,EAAM,OAAA,CAAA,aAAa,EAAE,MAAM,CAAC,IAAA,IAAA;IAC5B,MAAM,CAAC,cAAc,CAAC,KAAI,EAAE,iBAAiB,CAAC,SAAS,CAAC;;EAC1D;EACF,OAAA,iBAAC;AAAD,CALA,CAAuC,SAAS,CAAA;AAAnC,OAAA,CAAA,iBAAA,GAAA,iBAAA;AAOb,IAAA,gBAAA,GAAA,UAAA,MAAA,EAAA;EAAsC,SAAA,CAAA,gBAAA,EAAA,MAAA,CAAA;EACpC,SAAA,gBAAA,CAAY,MAAc,EAAE,KAAa,EAAA;IAAzC,IAAA,KAAA,GACE,MAAA,CAAA,IAAA,CAAA,IAAA,EAAM,OAAA,CAAA,YAAY,EAAE,MAAM,EAAE;MAAE,KAAK,EAAA;IAAA,CAAE,CAAC,IAAA,IAAA;IACtC,MAAM,CAAC,cAAc,CAAC,KAAI,EAAE,gBAAgB,CAAC,SAAS,CAAC;;EACzD;EACF,OAAA,gBAAC;AAAD,CALA,CAAsC,SAAS,CAAA;AAAlC,OAAA,CAAA,gBAAA,GAAA,gBAAA;AAOb,IAAA,cAAA,GAAA,UAAA,MAAA,EAAA;EAAoC,SAAA,CAAA,cAAA,EAAA,MAAA,CAAA;EAClC,SAAA,cAAA,CAAA,EAAA;IAAA,IAAA,KAAA,GACE,MAAA,CAAA,IAAA,CAAA,IAAA,EAAM,OAAA,CAAA,eAAe,EAAE,+BAA+B,CAAC,IAAA,IAAA;IACvD,MAAM,CAAC,cAAc,CAAC,KAAI,EAAE,cAAc,CAAC,SAAS,CAAC;;EACvD;EACF,OAAA,cAAC;AAAD,CALA,CAAoC,SAAS,CAAA;AAAhC,OAAA,CAAA,cAAA,GAAA,cAAA;;;;;;;;;;;;;;;;;;AC3Cb,IAAA,KAAA,GAAA,OAAA,CAAA,OAAA,CAAA;AAWA,IAAM,OAAO,GAAG,CAAC,QAAQ,EAAE,QAAQ,CAAC;AACpC,IAAM,QAAQ,GAAG,SAAX,QAAQ,CAAI,KAAU,EAAA;EAAK,OAAA,OAAO,CAAC,OAAO,CAAA,OAAA,CAAQ,KAAK,EAAC,IAAI,CAAC;AAAlC,CAAkC;AAEnE,IAAM,OAAO,GAAG,KAAK;AAKrB,SAAgB,QAAQ,CAAC,IAAS,EAAA;EAChC,IAAI,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;IACvB,OAAO,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC;;EAE3B,IAAI,QAAQ,CAAC,IAAI,CAAC,EAAE;IAClB,OAAO,IAAI;;EAEb,IAAI,CAAA,CAAE,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,EAAE,OAAO,CAAC,IAAI,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE;IACjE,OAAO,IAAI,CAAC,KAAK;;EAGnB,IAAM,MAAM,GAA2B,CAAA,CAAE;EAEzC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,UAAC,GAAG,EAAA;IAC5B,MAAM,CAAC,GAAG,CAAC,GAAG,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;EACnC,CAAC,CAAC;EAEF,OAAO,MAAM;AACf;AAlBA,OAAA,CAAA,QAAA,GAAA,QAAA;AAoBA,SAAgB,aAAa,CAAC,EAAiB,EAAE,MAAc,EAAE,MAAW,EAAA;EAC1E,IAAM,OAAO,GAAgB;IAAE,OAAO,EAAE,OAAO;IAAE,MAAM,EAAA;EAAA,CAAE;EAEzD,IAAI,EAAE,EAAE;IACN,OAAO,CAAC,EAAE,GAAG,EAAE;;EAGjB,IAAI,MAAM,EAAE;IACV,OAAO,CAAC,MAAM,GAAG,CAAA,CAAE;IAEnB,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,UAAC,GAAG,EAAA;MAC9B,IAAM,KAAK,GAAG,MAAM,CAAC,GAAG,CAAC;MAEzB,IACE,GAAG,KAAK,MAAM,IACd,OAAO,KAAK,KAAK,QAAQ,IACzB,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,EAC1B;QACA,MAAM,IAAI,KAAK,CAAC,+CAA+C,CAAC;;MAGlE,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,GAAG,MAAM,CAAC,GAAG,CAAC;IACnC,CAAC,CAAC;;EAGJ,OAAO,OAAO;AAChB;AA1BA,OAAA,CAAA,aAAA,GAAA,aAAA;AA4BA,SAAgB,cAAc,CAAC,EAAU,EAAE,MAAW,EAAA;EACpD,OAAO;IAAE,OAAO,EAAE,OAAO;IAAE,EAAE,EAAA,EAAA;IAAE,MAAM,EAAA;EAAA,CAAE;AACzC;AAFA,OAAA,CAAA,cAAA,GAAA,cAAA;AAIA,SAAgB,mBAAmB,CAAC,EAAU,EAAE,KAAU,EAAA;EACxD,IAAI,OAA+B;EAEnC,IAAI,KAAK,YAAY,KAAA,CAAA,SAAS,EAAE;IAC9B,OAAO,GAAG;MACR,IAAI,EAAE,KAAK,CAAC,IAAI;MAChB,OAAO,EAAE,KAAK,CAAC;KAChB;GACF,MAAM;IACL,OAAO,GAAG;MACR,IAAI,EAAE,KAAA,CAAA,aAAa;MACnB,OAAO,EAAE,CAAC,KAAK,CAAC,OAAO,IAAI,KAAK,EAAE,QAAQ,CAAA;KAC3C;;EAGH,IAAI,CAAA,CAAE,CAAC,cAAc,CAAC,IAAI,CAAC,KAAK,EAAE,MAAM,CAAC,EAAE;IACzC,OAAO,CAAC,IAAI,GAAG,KAAK,CAAC,IAAI;;EAG3B,OAAO;IAAE,OAAO,EAAE,OAAO;IAAE,EAAE,EAAA,EAAA;IAAE,KAAK,EAAE;EAAO,CAAE;AACjD;AApBA,OAAA,CAAA,mBAAA,GAAA,mBAAA;AAsBA,SAAgB,qBAAqB,CAAC,QAAa,EAAA;EACjD,OAAO,QAAQ,CAAC,QAAQ,CAAC;AAC3B;AAFA,OAAA,CAAA,qBAAA,GAAA,qBAAA;AAIA,SAAS,qBAAqB,CAAC,QAAa,EAAA;EAC1C,IAAM,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,MAAM,CAAC,UAAC,CAAC,EAAA;IAAK,OAAA,CAAC,KAAK,UAAU;EAAhB,CAAgB,CAAC;EAClE,IAAI,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE;IACnB,MAAM,IAAI,KAAA,CAAA,SAAS,CACjB,KAAA,CAAA,gBAAgB,EAChB,kDAAA,GAAmD,IAAI,CAAC,MAAM,GAAA,GAAG,CAClE;;EAGH,IAAI,CAAA,CAAE,CAAC,cAAc,CAAC,IAAI,CAAC,QAAQ,EAAE,iBAAiB,CAAC,EAAE;IACvD,OAAO,qBAAqB,CAAC,QAAQ,CAAC,eAAe,CAAC;;EAGxD,IAAM,IAAI,GAAG,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;EAC9B,IAAI,CAAC,IAAI,IAAI,CAAC,CAAA,CAAE,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,EAAE,QAAQ,CAAC,EAAE;IACpD,OAAO,IAAI;;EAGb,QAAQ,IAAI,CAAC,MAAM;IACjB,KAAK,OAAO;MAAE;QACZ,IAAM,IAAI,GAAG,QAAQ,CAAC,IAAI,CAAC;QACnB,IAAA,KAAK,GAAoB,IAAI,CAAA,KAAxB;UAAE,MAAM,GAAY,IAAI,CAAA,MAAhB;UAAE,KAAK,GAAK,IAAI,CAAA,KAAT;QAC5B,IAAM,MAAM,GAAG,KAAK,IAAI,MAAM,IAAI,IAAI,CAAC,CAAC,CAAC;QAEzC,IAAI,KAAK,EAAE;UACT,MAAM,IAAI,KAAA,CAAA,gBAAgB,CAAC,MAAM,EAAE,KAAK,CAAC;;QAG3C,MAAM,IAAI,KAAA,CAAA,SAAS,CAAC,KAAA,CAAA,aAAa,EAAE,MAAM,EAAE,IAAI,CAAC;;IAElD,KAAK,gBAAgB;MACnB,MAAM,IAAI,KAAA,CAAA,cAAc,CAAA,CAAE;IAC5B,KAAK,IAAI;MACP,OAAO,IAAI;IACb;MACE,MAAM,IAAI,KAAA,CAAA,SAAS,CACjB,KAAA,CAAA,cAAc,EACd,0BAAA,GAA2B,IAAI,CAAC,MAAQ,CACzC;;AAEP;AAEA,SAAS,0BAA0B,CAAC,QAAa,EAAA;EAC/C,IAAI,CAAC,CAAA,CAAE,CAAC,cAAc,CAAC,IAAI,CAAC,QAAQ,EAAE,iBAAiB,CAAC,EAAE;IACxD,MAAM,IAAI,KAAA,CAAA,SAAS,CACjB,KAAA,CAAA,gBAAgB,EAChB,+DAA+D,CAChE;;EAGH,OAAO,qBAAqB,CAAC,QAAQ,CAAC;AACxC;AAEA,SAAgB,qBAAqB,CAAC,QAAa,EAAA;EACjD,IAAM,IAAI,GAAG,0BAA0B,CAAC,QAAQ,CAAC;EACjD,IAAM,SAAS,GAAG,QAAQ,CAAC,IAAI,CAAC;EAChC,OAAO,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,MAAM,GAAG,SAAS,GAAG,IAAI;AACzD;AAJA,OAAA,CAAA,qBAAA,GAAA,qBAAA;AAMA,SAAS,MAAM,CAAC,IAAyB,EAAE,GAAQ,EAAA;EACjD,IAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAA,CAAE;EAC1B,IAAI,KAAK,GAAG,GAAG;;IAGb,IAAM,IAAI,GAAG,KAAK,CAAC,KAAK,CAAA,CAAG;IAC3B,IAAI,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE;MACxB,KAAK,GAAG,KAAK,CAAC,IAAI,CAAC,UAAC,CAAC,EAAA;QAAK,OAAA,QAAQ,CAAC,CAAC,CAAC,EAAE,EAAE,EAAE,CAAC,KAAK,IAAI;MAA3B,CAA2B,CAAC;KACvD,MAAM,IAAI,CAAC,CAAA,CAAE,CAAC,cAAc,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,EAAE;;eACxC;MAAS,CAAA;KACjB,MAAM;MACL,KAAK,GAAG,KAAK,CAAC,IAAI,CAAC;;;EAPvB,OAAO,KAAK,CAAC,MAAM,EAAA;;;;EAWnB,OAAO,KAAK;AACd;AAEA,SAAgB,sBAAsB,CAAC,OAAY,EAAE,QAAa,EAAA;EAC1D,IAAA,EAAA,GAAiB,OAAO,CAAC,MAAM;IAA7B,IAAI,GAAA,EAAA,CAAA,IAAA;IAAE,IAAI,GAAA,EAAA,CAAA,IAAmB;EACrC,IAAM,QAAQ,GAAG,IAAI,KAAK,QAAQ;EAClC,IAAM,IAAI,GAAA,aAAA,CAAA,EAAA,EAAO,IAAI,EAAA,IAAA,CAAC;EACtB,IAAM,QAAQ,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,WAAW,CAAA,CAAE;EAGtC,IAAI,QAAQ,IAAI,QAAQ,CAAC,UAAU,CAAC,QAAQ,CAAC,EAAE;IAC7C,IAAI,CAAC,CAAC,CAAC,GAAG,cAAc;GACzB,MAAM,IAAI,eAAe,CAAC,UAAU,CAAC,QAAQ,CAAC,EAAE;IAC/C,IAAI,CAAC,CAAC,CAAC,GAAG,eAAe;;EAG3B,OAAO,MAAM,CAAC,IAAI,EAAE,QAAQ,CAAC;AAC/B;AAdA,OAAA,CAAA,sBAAA,GAAA,sBAAA;AAgBA,SAAgB,iBAAiB,CAAC,OAAY,EAAE,QAAa,EAAA;EAC3D,IAAI,CAAA,CAAE,CAAC,cAAc,CAAC,IAAI,CAAC,QAAQ,EAAE,iBAAiB,CAAC,EAAE;IACvD,qBAAqB,CAAC,QAAQ,CAAC,eAAe,CAAC;GAChD,MAAM;IACL,qBAAqB,CAAC,QAAQ,CAAC;;EAGjC,OAAO,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,EAAE,QAAQ,CAAC,QAAQ,CAAC,CAAC;AACxD;AARA,OAAA,CAAA,iBAAA,GAAA,iBAAA;AAUA,SAAgB,iBAAiB,CAAC,OAAY,EAAE,QAAa,EAAA;EAC3D,IAAI,CAAA,CAAE,CAAC,cAAc,CAAC,IAAI,CAAC,QAAQ,EAAE,iBAAiB,CAAC,EAAE;IACvD,qBAAqB,CAAC,QAAQ,CAAC,eAAe,CAAC;GAChD,MAAM;IACL,qBAAqB,CAAC,QAAQ,CAAC;;EAGjC,IAAI,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,MAAM,GAAG,CAAC,EAAE;IACpC,IAAM,IAAI,GAAG,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,EAAE,QAAQ,CAAC;IAClD,IAAI,IAAI,CAAC,KAAK,KAAK,MAAM,EAAE;MACzB,MAAM,IAAI,KAAA,CAAA,iBAAiB,CAAC,IAAI,CAAC,KAAK,CAAC;;;EAG3C,OAAO,IAAI;AACb;AAdA,OAAA,CAAA,iBAAA,GAAA,iBAAA;;;;;;;ACpMA,IAAM,OAAO,GAAG,OAAO;AACvB,OAAA,CAAA,OAAA,GAAe,OAAO;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACHtB,IAAA,eAAA,GAAA,eAAA,CAAA,OAAA,CAAA,iBAAA,CAAA,CAAA;AAQA,IAAA,SAAA,GAAA,YAAA;EAME,SAAA,SAAA,CAA4B,IAAU,EAAA;IAAV,IAAA,CAAA,IAAI,GAAJ,IAAI;IAFzB,IAAA,CAAA,MAAM,GAAG,EAAE;EAEuB;EAQlC,SAAA,CAAA,SAAA,CAAA,aAAa,GAApB,UAAqB,IAAU,EAAA;IAC7B,IAAM,UAAU,GAAG,CAAA,CAAA,EAAA,eAAA,CAAA,OAAa,EAAC,IAAI,CAAC;IAC9B,IAAA,MAAM,GAAK,IAAI,CAAA,MAAT;IACd,OAAO,CAAC,MAAM,GACV,UAAU,GACT,CAAC,MAAM,CAAyB,CAAC,MAAM,CAAC,UAAU,CAAC;EAC1D,CAAC;EACH,OAAA,SAAC;AAAD,CArBA,CAAA,CAAA;AAAa,OAAA,CAAA,SAAA,GAAA,SAAA;AAgCb,SAAgB,UAAU,CAA+C,IAAO,EAAA;EAG9E,OAAA,UAAA,MAAA,EAAA;IAA2B,SAAA,CAAA,KAAA,EAAA,MAAA,CAAA;IAApB,SAAA,KAAA,CAAA,EAAA;;IAkCP;IAzBS,KAAA,CAAA,SAAA,CAAA,EAAE,GAAT,UAAU,IAAU,EAAE,QAAqB,EAAA;MACzC,OAAO,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAQ,EAAE,QAAQ,CAAC;IACzE,CAAC;IAWM,KAAA,CAAA,SAAA,CAAA,IAAI,GAAX,UAAY,IAAU,EAAE,QAAqB,EAAA;MAC3C,OAAO,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAQ,EAAE,QAAQ,CAAC;IAC3E,CAAC;IAOM,KAAA,CAAA,SAAA,CAAA,GAAG,GAAV,YAAA;MACE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAA,CAAE;IAC1B,CAAC;IACH,OAAA,KAAC;EAAD,CAlCO,CAAoB,IAAI,CAAA;AAmCjC;AAtCA,OAAA,CAAA,UAAA,GAAA,UAAA;AA+CA,SAAgB,QAAQ,CAA+C,IAAO,EAAA;EAG5E,OAAA,UAAA,MAAA,EAAA;IAA2B,SAAA,CAAA,KAAA,EAAA,MAAA,CAAA;IAApB,SAAA,KAAA,CAAA,EAAA;;IAyBP;IALS,KAAA,CAAA,SAAA,CAAA,GAAG,GAAV,UAAW,IAAU,EAAA;MACnB,OAAO,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE;QAC/B,IAAI,EAAE,IAAI,CAAC,aAAa,CAAC,IAAI;OAC9B,CAAC;IACJ,CAAC;IACH,OAAA,KAAC;EAAD,CAzBO,CAAoB,IAAI,CAAA;AA0BjC;AA7BA,OAAA,CAAA,QAAA,GAAA,QAAA;AAsCA,SAAgB,QAAQ,CAA2D,IAAO,EAAA;EAGxF,OAAA,UAAA,MAAA,EAAA;IAA2B,SAAA,CAAA,KAAA,EAAA,MAAA,CAAA;IAApB,SAAA,KAAA,CAAA,EAAA;;IAmBP;IANS,KAAA,CAAA,SAAA,CAAA,GAAG,GAAV,UAAW,IAAU,EAAE,KAAQ,EAAA;MAC7B,OAAO,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE;QAC/B,IAAI,EAAE,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC;QAC9B,KAAK,EAAE;OACR,CAAC;IACJ,CAAC;IACH,OAAA,KAAC;EAAD,CAnBO,CAAoB,IAAI,CAAA;AAoBjC;AAvBA,OAAA,CAAA,QAAA,GAAA,QAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC9HA,IAAA,QAAA,GAAA,OAAA,CAAA,UAAA,CAAA;AAMA,IAAA,MAAA,GAAA,UAAA,MAAA,EAAA;EAA4B,SAAA,CAAA,MAAA,EAAA,MAAA,CAAA;EAA5B,SAAA,MAAA,CAAA,EAAA;IAAA,IAAA,KAAA,GAAA,MAAA,KAAA,IAAA,IAAA,MAAA,CAAA,KAAA,CAAA,IAAA,EAAA,SAAA,CAAA,IAAA,IAAA;IACS,KAAA,CAAA,MAAM,GAAG,eAAe;;EAWjC;EAAA,OAAA,MAAC;AAAD,CAZA,CAA4B,CAAA,CAAA,EAAA,QAAA,CAAA,UAAU,EAAC,CAAA,CAAA,EAAA,QAAA,CAAA,QAAQ,EAAC,CAAA,CAAA,EAAA,QAAA,CAAA,QAAQ,EAAC,QAAA,CAAA,SAAS,CAAC,CAAC,CAAC,CAAA;AAAxD,OAAA,CAAA,MAAA,GAAA,MAAA;AAiBb,IAAA,KAAA,GAAA,UAAA,MAAA,EAAA;EAA2B,SAAA,CAAA,KAAA,EAAA,MAAA,CAAA;EAA3B,SAAA,KAAA,CAAA,EAAA;IAAA,IAAA,KAAA,GAAA,MAAA,KAAA,IAAA,IAAA,MAAA,CAAA,KAAA,CAAA,IAAA,EAAA,SAAA,CAAA,IAAA,IAAA;IACS,KAAA,CAAA,MAAM,GAAG,OAAO;;EAQzB;EAAA,OAAA,KAAC;AAAD,CATA,CAA2B,CAAA,CAAA,EAAA,QAAA,CAAA,UAAU,EAAC,QAAA,CAAA,SAAS,CAAC,CAAA;AAAnC,OAAA,CAAA,KAAA,GAAA,KAAA;AAcb,IAAA,MAAA,GAAA,UAAA,MAAA,EAAA;EAA4B,SAAA,CAAA,MAAA,EAAA,MAAA,CAAA;EAA5B,SAAA,MAAA,CAAA,EAAA;IAAA,IAAA,KAAA,GAAA,MAAA,KAAA,IAAA,IAAA,MAAA,CAAA,KAAA,CAAA,IAAA,EAAA,SAAA,CAAA,IAAA,IAAA;IACS,KAAA,CAAA,MAAM,GAAG,QAAQ;;EAU1B;EAAA,OAAA,MAAC;AAAD,CAXA,CAA4B,CAAA,CAAA,EAAA,QAAA,CAAA,UAAU,EAAC,CAAA,CAAA,EAAA,QAAA,CAAA,QAAQ,EAAC,QAAA,CAAA,SAAS,CAAC,CAAC,CAAA;AAA9C,OAAA,CAAA,MAAA,GAAA,MAAA;;;;;;;;;;;;;;ACtCb,IAAA,QAAA,GAAA,OAAA,CAAA,QAAA,CAAA;AAEA,IAAA,KAAA,GAAA,eAAA,CAAA,OAAA,CAAA,QAAA,CAAA,CAAA;AAGA,IAAA,eAAA,GAAA,eAAA,CAAA,OAAA,CAAA,iBAAA,CAAA,CAAA;AAyCA,IAAA,aAAA,GAAA,YAAA;EAGE,SAAA,aAAA,CAAY,QAAmB,EAAA;IAC7B,IAAI,CAAC,QAAQ,GAAG,QAAQ;EAC1B;EAQO,aAAA,CAAA,SAAA,CAAA,GAAG,GAAV,UAAW,OAAgB,EAAA;IACzB,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC;IAC3B,OAAO,IAAI;EACb,CAAC;EAQM,aAAA,CAAA,SAAA,CAAA,MAAM,GAAb,UAAc,OAAgB,EAAA;IAC5B,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,UAAC,CAAC,EAAA;MAAK,OAAA,CAAC,KAAK,OAAO;IAAb,CAAa,CAAC;IAC1D,OAAO,IAAI;EACb,CAAC;EAOM,aAAA,CAAA,SAAA,CAAA,GAAG,GAAV,YAAA;IACE,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,UAAC,OAAO,EAAA;MAC5B,OAAO,CAAA,CAAE;IACX,CAAC,CAAC;IACF,IAAI,CAAC,QAAQ,GAAG,EAAE;IAClB,OAAO,IAAI;EACb,CAAC;EACH,OAAA,aAAC;AAAD,CAzCA,CAAA,CAAA;AAAa,OAAA,CAAA,aAAA,GAAA,aAAA;AA2Cb,SAAS,kBAAkB,CAAI,OAAU,EAAE,IAA0B,EAAA;EACnE,IAAI,CAAC,OAAO,CAAC;AACf;AAEA,SAAS,QAAQ,CACf,QAAkB,EAClB,IAAS,EACT,IAAW,EACX,IAAmB,EAAA;EADnB,IAAA,IAAA,KAAA,KAAA,CAAA,EAAA;IAAA,IAAA,GAAA,IAAW;EAAA;EACX,IAAA,IAAA,KAAA,KAAA,CAAA,EAAA;IAAA,IAAA,GAAA,EAAmB;EAAA;EAEnB,IAAI,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;IACvB,IAAI,CAAC,OAAO,CAAC,UAAC,KAAK,EAAA;MACjB,QAAQ,CAAC,QAAQ,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI,CAAC;MACrC,QAAQ,CAAC,QAAQ,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;IACxD,CAAC,CAAC;IACF;;EAGF,IAAM,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,WAAW,CAAA,CAAE;EAC7C,QAAQ,CAAC,YAAY,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,EAAE,CAAC;EAEzD,IAAI,OAAA,CAAO,IAAI,MAAK,QAAQ,EAAE;IAC5B,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,UAAC,GAAG,EAAA;MAC5B,QAAQ,CAAC,QAAQ,EAAE,IAAI,CAAC,GAAG,CAAC,EAAE,IAAI,EAAE,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;IACvD,CAAC,CAAC;;AAEN;AAiDA,IAAA,QAAA,GAAA,YAAA;EAME,SAAA,QAAA,CAAqB,IAAU,EAAW,WAAqD,EAAA;IAArD,IAAA,WAAA,KAAA,KAAA,CAAA,EAAA;MAAA,WAAA,GAAA,kBAAqD;IAAA;IAA1E,IAAA,CAAA,IAAI,GAAJ,IAAI;IAAiB,IAAA,CAAA,WAAW,GAAX,WAAW;IADrC,IAAA,CAAA,YAAY,GAAG,IAAI,QAAA,CAAA,YAAY,CAAA,CAAE;EACiD;EAU3F,QAAA,CAAA,SAAA,CAAA,EAAE,GAAT,UAAU,IAAU,EAAE,QAAkB,EAAA;IAAxC,IAAA,KAAA,GAAA,IAAA;IACE,KAAA,CAAA,OAAG,CAAC,IAAI,CAAC,4BAAA,GAA6B,IAAM,CAAC;IAC7C,IAAM,SAAS,GAAG,CAAA,CAAA,EAAA,eAAA,CAAA,OAAa,EAAC,IAAI,CAAC,CAClC,IAAI,CAAC,GAAG,CAAC,CACT,WAAW,CAAA,CAAE;IAEhB,IAAM,YAAY,GAAG,IAAI,CAAC,IAAI,CAAC,OAAO,CAAa,qBAAqB,EAAE;MACxE,KAAK,EAAE,CAAA,CAAA,EAAA,eAAA,CAAA,OAAa,EAAC,IAAI;KAC1B,CAAC;IAEF,IAAI,OAAyD;IAE7D,IAAM,GAAG,GAAG,YAAY,CAAC,IAAI,CAAC,UAAC,EAAM,EAAA;UAAJ,EAAE,GAAA,EAAA,CAAA,EAAA;MACjC,OAAO,GAAG,SAAA,QAAC,EAAE,EAAE,IAAI,EAAE,EAAE,EAAA;QACrB,IAAI,OAAO,EAAE,KAAK,WAAW,IAAI,EAAE,KAAK,EAAE,EAAE;UAC1C;;QAEF,QAAQ,CAAC,EAAE,EAAE,IAAI,CAAC;MACpB,CAAC;MACD,KAAI,CAAC,YAAY,CAAC,EAAE,CAAC,SAAS,EAAE,OAAO,CAAC;MACxC,OAAO,EAAE;IACX,CAAC,CAAC;IAEF,IAAM,GAAG,GAAG,SAAN,GAAG,CAAA,EAAG;MACV,IAAI,CAAC,OAAO,EAAE;QACZ;;MAGF,GAAG,CAAC,IAAI,CAAC,UAAC,EAAE,EAAA;QACV,KAAI,CAAC,IAAI,CAAC,OAAO,CAAC,uBAAuB,EAAE;UAAE,EAAE,EAAA;QAAA,CAAE,CAAC;MACpD,CAAC,CAAC;MAEF,KAAI,CAAC,YAAY,CAAC,cAAc,CAAC,SAAS,EAAE,OAAO,CAAC;IACtD,CAAC;IAED,GAAG,CAAC,YAAY,GAAG,YAAY;IAC/B,OAAO,GAAG;EACZ,CAAC;EAUM,QAAA,CAAA,SAAA,CAAA,IAAI,GAAX,UAAqB,IAAU,EAAE,QAAkB,EAAA;IAAnD,IAAA,KAAA,GAAA,IAAA;IACE,IAAI,GAAiB;IACrB,IAAM,OAAO,GAAG,SAAV,OAAO,CAAI,EAAK,EAAE,IAAS,EAAA;MAC/B,IAAI,OAAO,GAAG,KAAK,UAAU,EAAE;QAC7B,GAAG,CAAA,CAAE;;MAEP,QAAQ,CAAC,IAAI,CAAC,KAAI,EAAE,EAAE,EAAE,IAAI,CAAC;IAC/B,CAAC;IACD,OAAO,CAAC,QAAQ,GAAG,QAAQ;IAC3B,GAAG,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI,EAAE,OAAO,CAAC;IAC5B,OAAO,GAAG;EACZ,CAAC;EAOM,QAAA,CAAA,SAAA,CAAA,GAAG,GAAV,YAAA;IACE,MAAM,IAAI,KAAK,CACb,+EAA+E,CAChF;EACH,CAAC;EAQM,QAAA,CAAA,SAAA,CAAA,QAAQ,GAAf,UAAgB,IAAS,EAAA;IAAzB,IAAA,KAAA,GAAA,IAAA;IACE,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE,UAAC,CAAQ,EAAA;MAAR,IAAA,CAAA,KAAA,KAAA,CAAA,EAAA;QAAA,CAAA,GAAA,IAAQ;MAAA;MAAK,OAAA,QAAQ,CAAC,KAAI,EAAE,CAAC,CAAC;IAAjB,CAAiB,CAAC;IACvD,OAAO,IAAI;EACb,CAAC;EAiCM,QAAA,CAAA,SAAA,CAAA,KAAK,GAAZ,UAAa,QAAmB,EAAA;IAC9B,OAAO,IAAI,aAAa,CAAC,QAAQ,CAAC;EACpC,CAAC;EACH,OAAA,QAAC;AAAD,CApIA,CAAA,CAAA;;;;;;;;;;;;;;;;;ACjKA,IAAM,OAAO,GAAG,CAAC,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE,MAAM,CAAC;AAE5C,SAAwB,WAAW,CAAC,OAAY,EAAE,IAAS,EAAE,IAAmB,EAAA;EAAnB,IAAA,IAAA,KAAA,KAAA,CAAA,EAAA;IAAA,IAAA,GAAA,EAAmB;EAAA;EAC9E,IAAM,QAAQ,GAAG;IACf,KAAK,EAAL,SAAA,MAAM,MAAW,EAAE,CAAM,EAAE,IAAW,EAAA;MACpC,IAAI,OAAO,IAAI,KAAK,UAAU,EAAE;QAC9B,OAAO,IAAI,CAAC,IAAI,CAAA,KAAA,CAAT,IAAI,EAAA,aAAA,CAAA,CAAM,OAAO,EAAE,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAA,EAAK,IAAI,EAAA,KAAA,CAAA,CAAA;;MAEnD,MAAM,IAAI,SAAS,CAAC,0BAAA,GAA2B,IAAM,CAAC;IACxD,CAAC;IAED,GAAG,EAAH,SAAA,IAAI,MAAW,EAAE,QAAgB,EAAA;MAC/B,IAAI,OAAO,CAAC,QAAQ,CAAC,QAAQ,CAAC,EAAE;QAC9B,IAAI,OAAO,IAAI,CAAC,QAAQ,CAAC,KAAK,UAAU,EAAE;UACxC,MAAM,IAAI,SAAS,CAAC,4BAAA,GAA6B,IAAI,GAAA,GAAA,GAAI,QAAQ,GAAA,GAAG,CAAC;;QAEvE,OAAO,YAAA;UAAC,IAAA,IAAA,GAAA,EAAA;eAAA,IAAA,EAAA,GAAA,CAAc,EAAd,EAAA,GAAA,SAAA,CAAA,MAAc,EAAd,EAAA,EAAc,EAAA;YAAd,IAAA,CAAA,EAAA,CAAA,GAAA,SAAA,CAAA,EAAA,CAAA;;UAAmB,OAAA,IAAI,CAAC,QAAQ,CAAC,CAAA,KAAA,CAAd,IAAI,EAAA,aAAA,CAAA,CAAW,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAA,EAAK,IAAI,EAAA,KAAA,CAAA,CAAA;QAAtC,CAAuC;;MAGpE,OAAO,WAAW,CAAC,OAAO,EAAE,IAAI,EAAE,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;IAC1D;GACD;EAED,OAAO,IAAI,KAAK,CAAC,IAAI,EAAE,QAAQ,CAAC;AAClC;AAtBA,OAAA,CAAA,OAAA,GAAA,WAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACLA,IAAA,QAAA,GAAA,OAAA,CAAA,QAAA,CAAA;AAEA,IAAA,KAAA,GAAA,eAAA,CAAA,OAAA,CAAA,QAAA,CAAA,CAAA;AACA,IAAA,eAAA,GAAA,eAAA,CAAA,OAAA,CAAA,iBAAA,CAAA,CAAA;AACA,IAAA,GAAA,GAAA,YAAA,CAAA,OAAA,CAAA,OAAA,CAAA,CAAA;AAGA,IAAA,SAAA,GAAA,eAAA,CAAA,OAAA,CAAA,YAAA,CAAA,CAAA;AACA,IAAA,YAAA,GAAA,OAAA,CAAA,cAAA,CAAA;AACA,IAAA,UAAA,GAAA,eAAA,CAAA,OAAA,CAAA,YAAA,CAAA,CAAA;AACA,IAAA,OAAA,GAAA,eAAA,CAAA,OAAA,CAAA,SAAA,CAAA,CAAA;AAwFA,IAAA,IAAA,GAAA,UAAA,MAAA,EAAA;EAA0B,SAAA,CAAA,IAAA,EAAA,MAAA,CAAA;EAoDxB,SAAA,IAAA,CACmB,OAAgB,EACjC,OAAyB,EAAA;IAAzB,IAAA,OAAA,KAAA,KAAA,CAAA,EAAA;MAAA,OAAA,GAAA,CAAA,CAAyB;IAAA;IAF3B,IAAA,KAAA,GAGE,MAAA,CAAA,IAAA,CAAA,IAAA,CAAO,IAAA,IAAA;IAFU,KAAA,CAAA,OAAO,GAAP,OAAO;IApDnB,KAAA,CAAA,OAAO,GAAW,SAAA,CAAA,OAAO;IAUzB,KAAA,CAAA,MAAM,GAAG,IAAI,YAAA,CAAA,MAAM,CAAC,KAAI,CAAC;IAKzB,KAAA,CAAA,KAAK,GAAG,IAAI,YAAA,CAAA,KAAK,CAAC,KAAI,CAAC;IAKvB,KAAA,CAAA,MAAM,GAAG,IAAI,YAAA,CAAA,MAAM,CAAC,KAAI,CAAC;IA4BxB,KAAA,CAAA,SAAS,GAAG,CAAC;IACb,KAAA,CAAA,QAAQ,GAAa,CAAA,CAAE;IAO7B,KAAI,CAAC,QAAQ,GAAG,IAAI,UAAA,CAAA,OAAQ,CAAC,KAAI,EAAE,OAAO,CAAC,mBAAmB,CAAC;IAC/D,KAAI,CAAC,OAAO,GAAG,CAAA,CAAA,EAAA,OAAA,CAAA,OAAe,EAAC,KAAI,EAAE,KAAI,CAAC,OAAO,CAAC;IAClD,KAAI,CAAC,MAAM,GAAG,CAAA,CAAA,EAAA,OAAA,CAAA,OAAe,EAAC,KAAI,EAAE,KAAI,CAAC,MAAM,CAAC;IAChD,KAAI,CAAC,KAAK,GAAG,CAAA,CAAA,EAAA,OAAA,CAAA,OAAe,EAAC,KAAI,EAAE,KAAI,CAAC,KAAK,CAAC;IAC9C,KAAI,CAAC,MAAM,GAAG,CAAA,CAAA,EAAA,OAAA,CAAA,OAAe,EAAC,KAAI,EAAE,KAAI,CAAC,MAAM,CAAC;IAGhD,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,MAAM,CAAC,IAAI,OAAO,CAAC,IAAI,EAAE;MACnD,MAAM,CAAC,gBAAgB,CAAC,KAAI,EAAE;QAC5B,OAAO,EAAE;UAAE,QAAQ,EAAE;QAAK,CAAE;QAC5B,MAAM,EAAE;UAAE,QAAQ,EAAE;QAAK,CAAE;QAC3B,KAAK,EAAE;UAAE,QAAQ,EAAE;QAAK,CAAE;QAC1B,MAAM,EAAE;UAAE,QAAQ,EAAE;QAAK,CAAE;QAC3B,MAAM,EAAE;UAAE,QAAQ,EAAE;QAAK,CAAE;QAC3B,KAAK,EAAE;UAAE,QAAQ,EAAE;QAAK,CAAE;QAC1B,QAAQ,EAAE;UAAE,QAAQ,EAAE;QAAK,CAAE;QAC7B,MAAM,EAAE;UAAE,QAAQ,EAAE;QAAK;OAC1B,CAAC;MACF,MAAM,CAAC,IAAI,CAAC,KAAI,CAAC;;IAGnB,OAAO,CACJ,EAAE,CAAC,OAAO,EAAE,YAAA;MACX,KAAI,CAAC,IAAI,CAAC,OAAO,CAAC;IACpB,CAAC,CAAC,CACD,EAAE,CAAC,OAAO,EAAE,UAAC,KAAK,EAAA;MACjB,KAAI,CAAC,IAAI,CAAC,OAAO,EAAE,KAAK,CAAC;IAC3B,CAAC,CAAC,CACD,EAAE,CAAC,OAAO,EAAE,YAAA;MACX,KAAI,CAAC,IAAI,CAAC,OAAO,EAAE,KAAI,CAAC;IAC1B,CAAC,CAAC,CACD,EAAE,CAAC,MAAM,EAAE,KAAI,CAAC,cAAc,CAAC,IAAI,CAAC,KAAI,CAAC,CAAC;;EAC/C;EAKO,IAAA,CAAA,SAAA,CAAA,KAAK,GAAZ,YAAA;IACE,IAAI,CAAC,OAAO,CAAC,KAAK,CAAA,CAAE;IACpB,OAAO,IAAI;EACb,CAAC;EA6CM,IAAA,CAAA,SAAA,CAAA,OAAO,GAAd,UAAwB,IAAU,EAAE,MAAwB,EAAE,IAAa,EAAA;IACzE,IAAM,OAAO,GAAG,CAAA,CAAA,EAAA,eAAA,CAAA,OAAa,EAAC,IAAI,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC;IAC7C,IAAM,MAAM,GAAG,WAAA,GAAY,OAAS;IAEpC,IAAI,aAAa;IACjB,IAAI,OAAO,MAAM,KAAK,QAAQ,IAAI,OAAO,IAAI,KAAK,WAAW,EAAE;MAC7D,aAAa,GAAG;QAAE,IAAI,EAAE;MAAM,CAAE;KACjC,MAAM,IAAI,CAAC,OAAA,CAAO,MAAM,MAAK,QAAQ,IAAI,CAAC,MAAM,KAAK,OAAO,IAAI,KAAK,QAAQ,EAAE;MAC9E,aAAa,GAAG,MAAM,CAAC,MAAM,CAAC;QAAE,IAAI,EAAA;MAAA,CAAE,EAAE,MAAM,CAAC;KAChD,MAAM;MACL,aAAa,GAAG,MAAM;;IAGxB,OAAO,IAAI,CAAC,OAAO,CAAI,MAAM,EAAE,aAAa,CAAC;EAC/C,CAAC;EAQM,IAAA,CAAA,SAAA,CAAA,GAAG,GAAV,UAAoB,IAAU,EAAA;IAC5B,OAAO,IAAI,CAAC,OAAO,CAAI,MAAM,EAAE;MAC7B,IAAI,EAAE,CAAA,CAAA,EAAA,eAAA,CAAA,OAAa,EAAC,IAAI,CAAC;MACzB,IAAI,EAAE;KACP,CAAC;EACJ,CAAC;EAgBM,IAAA,CAAA,SAAA,CAAA,OAAO,GAAd,UAAkB,MAAc,EAAE,MAAW,EAAA;IAA7C,IAAA,KAAA,GAAA,IAAA;IACE,OAAO,IAAI,OAAO,CAAC,UAAC,OAAO,EAAE,MAAM,EAAA;MACjC,IAAM,EAAE,GAAG,KAAI,CAAC,aAAa,CAAA,CAAE;MAC/B,IAAM,OAAO,GAAG,GAAG,CAAC,aAAa,CAAC,EAAE,EAAE,MAAM,EAAE,MAAM,CAAC;MACrD,KAAI,CAAC,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC;MAC7B,KAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,GAAG;QAAE,OAAO,EAAA,OAAA;QAAE,MAAM,EAAA;MAAA,CAAE;IACzC,CAAC,CAAC;EACJ,CAAC;EAEO,IAAA,CAAA,SAAA,CAAA,cAAc,GAAtB,UAAuB,QAAsB,EAAA;IACnC,IAAA,EAAE,GAAa,QAAQ,CAAA,EAArB;MAAE,MAAM,GAAK,QAAQ,CAAA,MAAb;IAClB,IAAI,MAAM,KAAK,iBAAiB,EAAE;MAChC,KAAA,CAAA,OAAG,CAAC,KAAK,CAAC,WAAW,EAAE,QAAQ,CAAC;MAChC,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,QAAQ,CAAC,MAAM,CAAC;KACxC,MAAM;MACL,IAAI,CAAA,CAAE,CAAC,cAAc,CAAC,IAAI,CAAC,QAAQ,EAAE,QAAQ,CAAC,EAAE;QAC9C,KAAA,CAAA,OAAG,CAAC,KAAK,CAAC,SAAS,EAAE,QAAQ,CAAC;QACtB,IAAA,OAAO,GAAK,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAA,OAAtB;QACf,OAAO,CAAC,QAAQ,CAAC,MAAM,CAAC;OACzB,MAAM;QACL,KAAA,CAAA,OAAG,CAAC,KAAK,CAAC,QAAQ,EAAE,QAAQ,CAAC;QACrB,IAAA,MAAM,GAAK,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAA,MAAtB;QACd,MAAM,CAAC,QAAQ,CAAC,KAAK,CAAC;;MAExB,OAAO,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC;;EAE5B,CAAC;EAEO,IAAA,CAAA,SAAA,CAAA,aAAa,GAArB,YAAA;IACE,IAAM,SAAS,GAAG,IAAI,CAAC,SAAS;IAChC,IAAI,CAAC,SAAS,IAAI,CAAC;IACnB,OAAO,SAAS,CAAC,QAAQ,CAAA,CAAE;EAC7B,CAAC;EACH,OAAA,IAAC;AAAD,CA1NA,CAA0B,QAAA,CAAA,YAAY,CAAA;AAAzB,OAAA,CAAA,IAAA,GAAA,IAAA;AA4Nb,OAAA,CAAA,OAAA,GAAe,IAAI;;;;;;;;;;;;;AC7TnB,IAAA,IAAA,GAAA,eAAA,CAAA,OAAA,CAAA,cAAA,CAAA,CAAA;AACA,IAAA,SAAA,GAAA,eAAA,CAAA,OAAA,CAAA,WAAA,CAAA,CAAA;AACA,IAAA,IAAA,GAAA,eAAA,CAAA,OAAA,CAAA,gBAAA,CAAA,CAAA;AAEA,IAAA,MAAA,GAAA,eAAA,CAAA,OAAA,CAAA,QAAA,CAAA,CAAA;AAEA,IAAA,MAAA,GAAA,OAAA,CAAA,QAAA,CAAA;AAAS,MAAA,CAAA,cAAA,CAAA,OAAA,EAAA,MAAA,EAAA;EAAA,UAAA,EAAA,IAAA;EAAA,GAAA,EAAA,SAAA,IAAA,EAAA;IAAA,OAAA,eAAA,CAAA,MAAA,CAAA,CAAA,OAAO;EAAA;AAAA,CAAA,CAAA;AAEhB,SAAS,WAAW,CAAC,IAAa,EAAA;EACxB,IAAA,QAAQ,GAAK,IAAI,CAAA,QAAT;EAChB,QAAQ,QAAQ;IACd,KAAK,EAAE;IACP,KAAK,KAAK;IACV,KAAK,MAAM;MAAE;QACX,IAAM,eAAe,GAAG,SAAlB,eAAe,CAAI,GAAW,EAAE,IAAY,EAAA;UAChD,OAAO,IAAI,SAAS,CAAC,GAAG,EAAE,IAAI,CAAC;QACjC,CAAC;QACD,IAAM,SAAS,GAAG,CAAA,CAAA,EAAA,IAAA,CAAA,OAAgB,EAAC,eAAe,EAAE,IAAI,CAAC;QACzD,OAAO,IAAI,IAAA,CAAA,OAAS,CAAC,SAAS,CAAC;;IAEjC;MACE,MAAM,IAAI,KAAK,CAAC,oBAAA,GAAqB,QAAU,CAAC;;AAEtD;AAEA,SAAgB,UAAU,CAAiB,IAAiC,EAAA;EAC1E,OAAO,CAAA,CAAA,EAAA,SAAA,CAAA,OAAe,EAAI,WAAW,EAAE;IAAE,QAAQ,EAAE;EAAM,CAAE,CAAC,CAAC,IAAI,CAAC;AACpE;AAFA,OAAA,CAAA,UAAA,GAAA,UAAA;AAea,OAAA,CAAA,OAAO,GAAG,UAAU,CAAC,MAAA,CAAA,OAAI,CAAC","file":"jsxapi.js","sourceRoot":"../src","sourcesContent":["// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\nmodule.exports.once = once;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function errorListener(err) {\n      emitter.removeListener(name, resolver);\n      reject(err);\n    }\n\n    function resolver() {\n      if (typeof emitter.removeListener === 'function') {\n        emitter.removeListener('error', errorListener);\n      }\n      resolve([].slice.call(arguments));\n    };\n\n    eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });\n    if (name !== 'error') {\n      addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });\n    }\n  });\n}\n\nfunction addErrorHandlerIfEventEmitter(emitter, handler, flags) {\n  if (typeof emitter.on === 'function') {\n    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);\n  }\n}\n\nfunction eventTargetAgnosticAddListener(emitter, name, listener, flags) {\n  if (typeof emitter.on === 'function') {\n    if (flags.once) {\n      emitter.once(name, listener);\n    } else {\n      emitter.on(name, listener);\n    }\n  } else if (typeof emitter.addEventListener === 'function') {\n    // EventTarget does not have `error` event semantics like Node\n    // EventEmitters, we do not listen for `error` events here.\n    emitter.addEventListener(name, function wrapListener(arg) {\n      // IE does not have builtin `{ once: true }` support so we\n      // have to do it manually.\n      if (flags.once) {\n        emitter.removeEventListener(name, wrapListener);\n      }\n      listener(arg);\n    });\n  } else {\n    throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof emitter);\n  }\n}\n","/*\n* loglevel - https://github.com/pimterry/loglevel\n*\n* Copyright (c) 2013 Tim Perry\n* Licensed under the MIT license.\n*/\n(function (root, definition) {\n    \"use strict\";\n    if (typeof define === 'function' && define.amd) {\n        define(definition);\n    } else if (typeof module === 'object' && module.exports) {\n        module.exports = definition();\n    } else {\n        root.log = definition();\n    }\n}(this, function () {\n    \"use strict\";\n\n    // Slightly dubious tricks to cut down minimized file size\n    var noop = function() {};\n    var undefinedType = \"undefined\";\n    var isIE = (typeof window !== undefinedType) && (typeof window.navigator !== undefinedType) && (\n        /Trident\\/|MSIE /.test(window.navigator.userAgent)\n    );\n\n    var logMethods = [\n        \"trace\",\n        \"debug\",\n        \"info\",\n        \"warn\",\n        \"error\"\n    ];\n\n    var _loggersByName = {};\n    var defaultLogger = null;\n\n    // Cross-browser bind equivalent that works at least back to IE6\n    function bindMethod(obj, methodName) {\n        var method = obj[methodName];\n        if (typeof method.bind === 'function') {\n            return method.bind(obj);\n        } else {\n            try {\n                return Function.prototype.bind.call(method, obj);\n            } catch (e) {\n                // Missing bind shim or IE8 + Modernizr, fallback to wrapping\n                return function() {\n                    return Function.prototype.apply.apply(method, [obj, arguments]);\n                };\n            }\n        }\n    }\n\n    // Trace() doesn't print the message in IE, so for that case we need to wrap it\n    function traceForIE() {\n        if (console.log) {\n            if (console.log.apply) {\n                console.log.apply(console, arguments);\n            } else {\n                // In old IE, native console methods themselves don't have apply().\n                Function.prototype.apply.apply(console.log, [console, arguments]);\n            }\n        }\n        if (console.trace) console.trace();\n    }\n\n    // Build the best logging method possible for this env\n    // Wherever possible we want to bind, not wrap, to preserve stack traces\n    function realMethod(methodName) {\n        if (methodName === 'debug') {\n            methodName = 'log';\n        }\n\n        if (typeof console === undefinedType) {\n            return false; // No method possible, for now - fixed later by enableLoggingWhenConsoleArrives\n        } else if (methodName === 'trace' && isIE) {\n            return traceForIE;\n        } else if (console[methodName] !== undefined) {\n            return bindMethod(console, methodName);\n        } else if (console.log !== undefined) {\n            return bindMethod(console, 'log');\n        } else {\n            return noop;\n        }\n    }\n\n    // These private functions always need `this` to be set properly\n\n    function replaceLoggingMethods() {\n        /*jshint validthis:true */\n        var level = this.getLevel();\n\n        // Replace the actual methods.\n        for (var i = 0; i < logMethods.length; i++) {\n            var methodName = logMethods[i];\n            this[methodName] = (i < level) ?\n                noop :\n                this.methodFactory(methodName, level, this.name);\n        }\n\n        // Define log.log as an alias for log.debug\n        this.log = this.debug;\n\n        // Return any important warnings.\n        if (typeof console === undefinedType && level < this.levels.SILENT) {\n            return \"No console available for logging\";\n        }\n    }\n\n    // In old IE versions, the console isn't present until you first open it.\n    // We build realMethod() replacements here that regenerate logging methods\n    function enableLoggingWhenConsoleArrives(methodName) {\n        return function () {\n            if (typeof console !== undefinedType) {\n                replaceLoggingMethods.call(this);\n                this[methodName].apply(this, arguments);\n            }\n        };\n    }\n\n    // By default, we use closely bound real methods wherever possible, and\n    // otherwise we wait for a console to appear, and then try again.\n    function defaultMethodFactory(methodName, _level, _loggerName) {\n        /*jshint validthis:true */\n        return realMethod(methodName) ||\n               enableLoggingWhenConsoleArrives.apply(this, arguments);\n    }\n\n    function Logger(name, factory) {\n      // Private instance variables.\n      var self = this;\n      /**\n       * The level inherited from a parent logger (or a global default). We\n       * cache this here rather than delegating to the parent so that it stays\n       * in sync with the actual logging methods that we have installed (the\n       * parent could change levels but we might not have rebuilt the loggers\n       * in this child yet).\n       * @type {number}\n       */\n      var inheritedLevel;\n      /**\n       * The default level for this logger, if any. If set, this overrides\n       * `inheritedLevel`.\n       * @type {number|null}\n       */\n      var defaultLevel;\n      /**\n       * A user-specific level for this logger. If set, this overrides\n       * `defaultLevel`.\n       * @type {number|null}\n       */\n      var userLevel;\n\n      var storageKey = \"loglevel\";\n      if (typeof name === \"string\") {\n        storageKey += \":\" + name;\n      } else if (typeof name === \"symbol\") {\n        storageKey = undefined;\n      }\n\n      function persistLevelIfPossible(levelNum) {\n          var levelName = (logMethods[levelNum] || 'silent').toUpperCase();\n\n          if (typeof window === undefinedType || !storageKey) return;\n\n          // Use localStorage if available\n          try {\n              window.localStorage[storageKey] = levelName;\n              return;\n          } catch (ignore) {}\n\n          // Use session cookie as fallback\n          try {\n              window.document.cookie =\n                encodeURIComponent(storageKey) + \"=\" + levelName + \";\";\n          } catch (ignore) {}\n      }\n\n      function getPersistedLevel() {\n          var storedLevel;\n\n          if (typeof window === undefinedType || !storageKey) return;\n\n          try {\n              storedLevel = window.localStorage[storageKey];\n          } catch (ignore) {}\n\n          // Fallback to cookies if local storage gives us nothing\n          if (typeof storedLevel === undefinedType) {\n              try {\n                  var cookie = window.document.cookie;\n                  var cookieName = encodeURIComponent(storageKey);\n                  var location = cookie.indexOf(cookieName + \"=\");\n                  if (location !== -1) {\n                      storedLevel = /^([^;]+)/.exec(\n                          cookie.slice(location + cookieName.length + 1)\n                      )[1];\n                  }\n              } catch (ignore) {}\n          }\n\n          // If the stored level is not valid, treat it as if nothing was stored.\n          if (self.levels[storedLevel] === undefined) {\n              storedLevel = undefined;\n          }\n\n          return storedLevel;\n      }\n\n      function clearPersistedLevel() {\n          if (typeof window === undefinedType || !storageKey) return;\n\n          // Use localStorage if available\n          try {\n              window.localStorage.removeItem(storageKey);\n          } catch (ignore) {}\n\n          // Use session cookie as fallback\n          try {\n              window.document.cookie =\n                encodeURIComponent(storageKey) + \"=; expires=Thu, 01 Jan 1970 00:00:00 UTC\";\n          } catch (ignore) {}\n      }\n\n      function normalizeLevel(input) {\n          var level = input;\n          if (typeof level === \"string\" && self.levels[level.toUpperCase()] !== undefined) {\n              level = self.levels[level.toUpperCase()];\n          }\n          if (typeof level === \"number\" && level >= 0 && level <= self.levels.SILENT) {\n              return level;\n          } else {\n              throw new TypeError(\"log.setLevel() called with invalid level: \" + input);\n          }\n      }\n\n      /*\n       *\n       * Public logger API - see https://github.com/pimterry/loglevel for details\n       *\n       */\n\n      self.name = name;\n\n      self.levels = { \"TRACE\": 0, \"DEBUG\": 1, \"INFO\": 2, \"WARN\": 3,\n          \"ERROR\": 4, \"SILENT\": 5};\n\n      self.methodFactory = factory || defaultMethodFactory;\n\n      self.getLevel = function () {\n          if (userLevel != null) {\n            return userLevel;\n          } else if (defaultLevel != null) {\n            return defaultLevel;\n          } else {\n            return inheritedLevel;\n          }\n      };\n\n      self.setLevel = function (level, persist) {\n          userLevel = normalizeLevel(level);\n          if (persist !== false) {  // defaults to true\n              persistLevelIfPossible(userLevel);\n          }\n\n          // NOTE: in v2, this should call rebuild(), which updates children.\n          return replaceLoggingMethods.call(self);\n      };\n\n      self.setDefaultLevel = function (level) {\n          defaultLevel = normalizeLevel(level);\n          if (!getPersistedLevel()) {\n              self.setLevel(level, false);\n          }\n      };\n\n      self.resetLevel = function () {\n          userLevel = null;\n          clearPersistedLevel();\n          replaceLoggingMethods.call(self);\n      };\n\n      self.enableAll = function(persist) {\n          self.setLevel(self.levels.TRACE, persist);\n      };\n\n      self.disableAll = function(persist) {\n          self.setLevel(self.levels.SILENT, persist);\n      };\n\n      self.rebuild = function () {\n          if (defaultLogger !== self) {\n              inheritedLevel = normalizeLevel(defaultLogger.getLevel());\n          }\n          replaceLoggingMethods.call(self);\n\n          if (defaultLogger === self) {\n              for (var childName in _loggersByName) {\n                _loggersByName[childName].rebuild();\n              }\n          }\n      };\n\n      // Initialize all the internal levels.\n      inheritedLevel = normalizeLevel(\n          defaultLogger ? defaultLogger.getLevel() : \"WARN\"\n      );\n      var initialLevel = getPersistedLevel();\n      if (initialLevel != null) {\n          userLevel = normalizeLevel(initialLevel);\n      }\n      replaceLoggingMethods.call(self);\n    }\n\n    /*\n     *\n     * Top-level API\n     *\n     */\n\n    defaultLogger = new Logger();\n\n    defaultLogger.getLogger = function getLogger(name) {\n        if ((typeof name !== \"symbol\" && typeof name !== \"string\") || name === \"\") {\n            throw new TypeError(\"You must supply a name when creating a logger.\");\n        }\n\n        var logger = _loggersByName[name];\n        if (!logger) {\n            logger = _loggersByName[name] = new Logger(\n                name,\n                defaultLogger.methodFactory\n            );\n        }\n        return logger;\n    };\n\n    // Grab the current global log variable in case of overwrite\n    var _log = (typeof window !== undefinedType) ? window.log : undefined;\n    defaultLogger.noConflict = function() {\n        if (typeof window !== undefinedType &&\n               window.log === defaultLogger) {\n            window.log = _log;\n        }\n\n        return defaultLogger;\n    };\n\n    defaultLogger.getLoggers = function getLoggers() {\n        return _loggersByName;\n    };\n\n    // ES6 default export, for compatibility\n    defaultLogger['default'] = defaultLogger;\n\n    return defaultLogger;\n}));\n","/*\n * This module basically patches the `loglevel` library with some niceities for\n * named loggers. Named loggers prefix the log output with their log name and\n * their level can be set independently.\n */\n\nimport loglevel from 'loglevel';\n\nif (!(loglevel as any).isPatched) {\n  const origMethodFactory = loglevel.methodFactory;\n  const loggers = new Set<string>();\n\n  /*\n   * Bless the `log` object with custom plugins\n   */\n  Object.assign(loglevel, {\n    isPatched: true,\n\n    methodFactory(methodName: loglevel.LogLevelNames, logLevel: any, loggerName: string) {\n      if (loggerName) {\n        loggers.add(loggerName);\n      }\n      const rawMethod = origMethodFactory(methodName, logLevel, loggerName);\n      return (...args: any[]) => {\n        rawMethod(`[${loggerName || 'root'}]`, ...args);\n      };\n    },\n\n    /*\n     * Returns a list of logger names, excluding the root logger.\n     */\n    getLoggers() {\n      return Array.from(loggers);\n    },\n\n    setGlobalLevel(level: loglevel.LogLevelDesc) {\n      const allLoggers = [loglevel].concat(\n        (loglevel as any)\n          .getLoggers()\n          .map((name: string) => loglevel.getLogger(name)),\n      );\n\n      allLoggers.forEach((logger) => {\n        logger.setLevel(level);\n      });\n    },\n\n    setLevelTrace() {\n      (loglevel as any).setGlobalLevel('trace');\n    },\n    setLevelDebug() {\n      (loglevel as any).setGlobalLevel('debug');\n    },\n    setLevelInfo() {\n      (loglevel as any).setGlobalLevel('info');\n    },\n    setLevelWarn() {\n      (loglevel as any).setGlobalLevel('warn');\n    },\n    setLevelError() {\n      (loglevel as any).setGlobalLevel('error');\n    },\n  });\n\n  // Required to apply the plugin to log\n  loglevel.setLevel(loglevel.getLevel());\n}\n\nexport default loglevel.getLogger('jsxapi');\n","import { EventEmitter } from 'events';\nimport WS from 'ws';\n\nimport log from '../log';\nimport { XapiRequest } from '../xapi/types';\nimport { Backend } from './';\n\n/**\n * @external {WebSocket} https://developer.mozilla.org/en-US/docs/Web/API/WebSocket\n */\n\n/**\n * Backend to communicate with a WebSocket server.\n *\n * This backend expects to talk directly to a JSON-RPC WebSocket backend.\n * Authentication has to be handled by the transport layer, there is no\n * support for that on the socket itself.\n *\n * Once the socket is open, it is expected to be in the ready state.\n *\n * @implements {Backend}\n */\nexport default class WSBackend extends EventEmitter implements Backend {\n  private ws: WS | WebSocket;\n  private isReady: Promise<boolean>;\n\n  /**\n   * @param {Object|string} urlOrWS - WebSocket object or URL of the server.\n   */\n  constructor(urlOrWS: WS | WebSocket | string) {\n    super();\n    /**\n     * @type {WebSocket}\n     */\n    this.ws = typeof urlOrWS !== 'string' ? urlOrWS : new WebSocket(urlOrWS);\n    this.ws.onclose = this.handleClose;\n    this.ws.onerror = this.handleError;\n    this.ws.onmessage = this.handleMessage;\n\n    let resolveReady: (ready: boolean) => void;\n    /**\n     * @type {Promise}\n     */\n    this.isReady = new Promise((r) => {\n      resolveReady = r;\n    });\n    this.ws.onopen = () => {\n      this.emit('ready');\n      resolveReady(true);\n    };\n  }\n\n  public close() {\n    this.ws.close();\n  }\n\n  public execute(command: XapiRequest): Promise<void> {\n    return this.isReady.then(() => {\n      log.debug('[transport] (send): ', JSON.stringify(command));\n      this.ws.send(JSON.stringify(command));\n    });\n  }\n\n  private handleClose: WebSocket['onclose'] = (event) => {\n    if (event.code !== 1000) {\n      this.emit('error', 'WebSocket closed unexpectedly');\n    } else {\n      this.emit('close');\n    }\n  }\n\n  private handleError: WebSocket['onerror'] = (error) => {\n    this.emit('error', (error as ErrorEvent).error);\n  }\n\n  private handleMessage: WebSocket['onmessage'] = (message) => {\n    log.debug('[transport] (receive): ', message.data);\n    const data = JSON.parse(message.data as string);\n    this.emit('data', data);\n  }\n}\n","'use strict';\n\n/**\n * Check if we're required to add a port number.\n *\n * @see https://url.spec.whatwg.org/#default-port\n * @param {Number|String} port Port number we need to check\n * @param {String} protocol Protocol we need to check against.\n * @returns {Boolean} Is it a default port for the given protocol\n * @api private\n */\nmodule.exports = function required(port, protocol) {\n  protocol = protocol.split(':')[0];\n  port = +port;\n\n  if (!port) return false;\n\n  switch (protocol) {\n    case 'http':\n    case 'ws':\n    return port !== 80;\n\n    case 'https':\n    case 'wss':\n    return port !== 443;\n\n    case 'ftp':\n    return port !== 21;\n\n    case 'gopher':\n    return port !== 70;\n\n    case 'file':\n    return false;\n  }\n\n  return port !== 0;\n};\n","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , undef;\n\n/**\n * Decode a URI encoded string.\n *\n * @param {String} input The URI encoded string.\n * @returns {String|Null} The decoded string.\n * @api private\n */\nfunction decode(input) {\n  try {\n    return decodeURIComponent(input.replace(/\\+/g, ' '));\n  } catch (e) {\n    return null;\n  }\n}\n\n/**\n * Attempts to encode a given input.\n *\n * @param {String} input The string that needs to be encoded.\n * @returns {String|Null} The encoded string.\n * @api private\n */\nfunction encode(input) {\n  try {\n    return encodeURIComponent(input);\n  } catch (e) {\n    return null;\n  }\n}\n\n/**\n * Simple query string parser.\n *\n * @param {String} query The query string that needs to be parsed.\n * @returns {Object}\n * @api public\n */\nfunction querystring(query) {\n  var parser = /([^=?#&]+)=?([^&]*)/g\n    , result = {}\n    , part;\n\n  while (part = parser.exec(query)) {\n    var key = decode(part[1])\n      , value = decode(part[2]);\n\n    //\n    // Prevent overriding of existing properties. This ensures that build-in\n    // methods like `toString` or __proto__ are not overriden by malicious\n    // querystrings.\n    //\n    // In the case if failed decoding, we want to omit the key/value pairs\n    // from the result.\n    //\n    if (key === null || value === null || key in result) continue;\n    result[key] = value;\n  }\n\n  return result;\n}\n\n/**\n * Transform a query string to an object.\n *\n * @param {Object} obj Object that should be transformed.\n * @param {String} prefix Optional prefix.\n * @returns {String}\n * @api public\n */\nfunction querystringify(obj, prefix) {\n  prefix = prefix || '';\n\n  var pairs = []\n    , value\n    , key;\n\n  //\n  // Optionally prefix with a '?' if needed\n  //\n  if ('string' !== typeof prefix) prefix = '?';\n\n  for (key in obj) {\n    if (has.call(obj, key)) {\n      value = obj[key];\n\n      //\n      // Edge cases where we actually want to encode the value to an empty\n      // string instead of the stringified value.\n      //\n      if (!value && (value === null || value === undef || isNaN(value))) {\n        value = '';\n      }\n\n      key = encode(key);\n      value = encode(value);\n\n      //\n      // If we failed to encode the strings, we should bail out as we don't\n      // want to add invalid strings to the query.\n      //\n      if (key === null || value === null) continue;\n      pairs.push(key +'='+ value);\n    }\n  }\n\n  return pairs.length ? prefix + pairs.join('&') : '';\n}\n\n//\n// Expose the module.\n//\nexports.stringify = querystringify;\nexports.parse = querystring;\n","'use strict';\n\nvar required = require('requires-port')\n  , qs = require('querystringify')\n  , controlOrWhitespace = /^[\\x00-\\x20\\u00a0\\u1680\\u2000-\\u200a\\u2028\\u2029\\u202f\\u205f\\u3000\\ufeff]+/\n  , CRHTLF = /[\\n\\r\\t]/g\n  , slashes = /^[A-Za-z][A-Za-z0-9+-.]*:\\/\\//\n  , port = /:\\d+$/\n  , protocolre = /^([a-z][a-z0-9.+-]*:)?(\\/\\/)?([\\\\/]+)?([\\S\\s]*)/i\n  , windowsDriveLetter = /^[a-zA-Z]:/;\n\n/**\n * Remove control characters and whitespace from the beginning of a string.\n *\n * @param {Object|String} str String to trim.\n * @returns {String} A new string representing `str` stripped of control\n *     characters and whitespace from its beginning.\n * @public\n */\nfunction trimLeft(str) {\n  return (str ? str : '').toString().replace(controlOrWhitespace, '');\n}\n\n/**\n * These are the parse rules for the URL parser, it informs the parser\n * about:\n *\n * 0. The char it Needs to parse, if it's a string it should be done using\n *    indexOf, RegExp using exec and NaN means set as current value.\n * 1. The property we should set when parsing this value.\n * 2. Indication if it's backwards or forward parsing, when set as number it's\n *    the value of extra chars that should be split off.\n * 3. Inherit from location if non existing in the parser.\n * 4. `toLowerCase` the resulting value.\n */\nvar rules = [\n  ['#', 'hash'],                        // Extract from the back.\n  ['?', 'query'],                       // Extract from the back.\n  function sanitize(address, url) {     // Sanitize what is left of the address\n    return isSpecial(url.protocol) ? address.replace(/\\\\/g, '/') : address;\n  },\n  ['/', 'pathname'],                    // Extract from the back.\n  ['@', 'auth', 1],                     // Extract from the front.\n  [NaN, 'host', undefined, 1, 1],       // Set left over value.\n  [/:(\\d*)$/, 'port', undefined, 1],    // RegExp the back.\n  [NaN, 'hostname', undefined, 1, 1]    // Set left over.\n];\n\n/**\n * These properties should not be copied or inherited from. This is only needed\n * for all non blob URL's as a blob URL does not include a hash, only the\n * origin.\n *\n * @type {Object}\n * @private\n */\nvar ignore = { hash: 1, query: 1 };\n\n/**\n * The location object differs when your code is loaded through a normal page,\n * Worker or through a worker using a blob. And with the blobble begins the\n * trouble as the location object will contain the URL of the blob, not the\n * location of the page where our code is loaded in. The actual origin is\n * encoded in the `pathname` so we can thankfully generate a good \"default\"\n * location from it so we can generate proper relative URL's again.\n *\n * @param {Object|String} loc Optional default location object.\n * @returns {Object} lolcation object.\n * @public\n */\nfunction lolcation(loc) {\n  var globalVar;\n\n  if (typeof window !== 'undefined') globalVar = window;\n  else if (typeof global !== 'undefined') globalVar = global;\n  else if (typeof self !== 'undefined') globalVar = self;\n  else globalVar = {};\n\n  var location = globalVar.location || {};\n  loc = loc || location;\n\n  var finaldestination = {}\n    , type = typeof loc\n    , key;\n\n  if ('blob:' === loc.protocol) {\n    finaldestination = new Url(unescape(loc.pathname), {});\n  } else if ('string' === type) {\n    finaldestination = new Url(loc, {});\n    for (key in ignore) delete finaldestination[key];\n  } else if ('object' === type) {\n    for (key in loc) {\n      if (key in ignore) continue;\n      finaldestination[key] = loc[key];\n    }\n\n    if (finaldestination.slashes === undefined) {\n      finaldestination.slashes = slashes.test(loc.href);\n    }\n  }\n\n  return finaldestination;\n}\n\n/**\n * Check whether a protocol scheme is special.\n *\n * @param {String} The protocol scheme of the URL\n * @return {Boolean} `true` if the protocol scheme is special, else `false`\n * @private\n */\nfunction isSpecial(scheme) {\n  return (\n    scheme === 'file:' ||\n    scheme === 'ftp:' ||\n    scheme === 'http:' ||\n    scheme === 'https:' ||\n    scheme === 'ws:' ||\n    scheme === 'wss:'\n  );\n}\n\n/**\n * @typedef ProtocolExtract\n * @type Object\n * @property {String} protocol Protocol matched in the URL, in lowercase.\n * @property {Boolean} slashes `true` if protocol is followed by \"//\", else `false`.\n * @property {String} rest Rest of the URL that is not part of the protocol.\n */\n\n/**\n * Extract protocol information from a URL with/without double slash (\"//\").\n *\n * @param {String} address URL we want to extract from.\n * @param {Object} location\n * @return {ProtocolExtract} Extracted information.\n * @private\n */\nfunction extractProtocol(address, location) {\n  address = trimLeft(address);\n  address = address.replace(CRHTLF, '');\n  location = location || {};\n\n  var match = protocolre.exec(address);\n  var protocol = match[1] ? match[1].toLowerCase() : '';\n  var forwardSlashes = !!match[2];\n  var otherSlashes = !!match[3];\n  var slashesCount = 0;\n  var rest;\n\n  if (forwardSlashes) {\n    if (otherSlashes) {\n      rest = match[2] + match[3] + match[4];\n      slashesCount = match[2].length + match[3].length;\n    } else {\n      rest = match[2] + match[4];\n      slashesCount = match[2].length;\n    }\n  } else {\n    if (otherSlashes) {\n      rest = match[3] + match[4];\n      slashesCount = match[3].length;\n    } else {\n      rest = match[4]\n    }\n  }\n\n  if (protocol === 'file:') {\n    if (slashesCount >= 2) {\n      rest = rest.slice(2);\n    }\n  } else if (isSpecial(protocol)) {\n    rest = match[4];\n  } else if (protocol) {\n    if (forwardSlashes) {\n      rest = rest.slice(2);\n    }\n  } else if (slashesCount >= 2 && isSpecial(location.protocol)) {\n    rest = match[4];\n  }\n\n  return {\n    protocol: protocol,\n    slashes: forwardSlashes || isSpecial(protocol),\n    slashesCount: slashesCount,\n    rest: rest\n  };\n}\n\n/**\n * Resolve a relative URL pathname against a base URL pathname.\n *\n * @param {String} relative Pathname of the relative URL.\n * @param {String} base Pathname of the base URL.\n * @return {String} Resolved pathname.\n * @private\n */\nfunction resolve(relative, base) {\n  if (relative === '') return base;\n\n  var path = (base || '/').split('/').slice(0, -1).concat(relative.split('/'))\n    , i = path.length\n    , last = path[i - 1]\n    , unshift = false\n    , up = 0;\n\n  while (i--) {\n    if (path[i] === '.') {\n      path.splice(i, 1);\n    } else if (path[i] === '..') {\n      path.splice(i, 1);\n      up++;\n    } else if (up) {\n      if (i === 0) unshift = true;\n      path.splice(i, 1);\n      up--;\n    }\n  }\n\n  if (unshift) path.unshift('');\n  if (last === '.' || last === '..') path.push('');\n\n  return path.join('/');\n}\n\n/**\n * The actual URL instance. Instead of returning an object we've opted-in to\n * create an actual constructor as it's much more memory efficient and\n * faster and it pleases my OCD.\n *\n * It is worth noting that we should not use `URL` as class name to prevent\n * clashes with the global URL instance that got introduced in browsers.\n *\n * @constructor\n * @param {String} address URL we want to parse.\n * @param {Object|String} [location] Location defaults for relative paths.\n * @param {Boolean|Function} [parser] Parser for the query string.\n * @private\n */\nfunction Url(address, location, parser) {\n  address = trimLeft(address);\n  address = address.replace(CRHTLF, '');\n\n  if (!(this instanceof Url)) {\n    return new Url(address, location, parser);\n  }\n\n  var relative, extracted, parse, instruction, index, key\n    , instructions = rules.slice()\n    , type = typeof location\n    , url = this\n    , i = 0;\n\n  //\n  // The following if statements allows this module two have compatibility with\n  // 2 different API:\n  //\n  // 1. Node.js's `url.parse` api which accepts a URL, boolean as arguments\n  //    where the boolean indicates that the query string should also be parsed.\n  //\n  // 2. The `URL` interface of the browser which accepts a URL, object as\n  //    arguments. The supplied object will be used as default values / fall-back\n  //    for relative paths.\n  //\n  if ('object' !== type && 'string' !== type) {\n    parser = location;\n    location = null;\n  }\n\n  if (parser && 'function' !== typeof parser) parser = qs.parse;\n\n  location = lolcation(location);\n\n  //\n  // Extract protocol information before running the instructions.\n  //\n  extracted = extractProtocol(address || '', location);\n  relative = !extracted.protocol && !extracted.slashes;\n  url.slashes = extracted.slashes || relative && location.slashes;\n  url.protocol = extracted.protocol || location.protocol || '';\n  address = extracted.rest;\n\n  //\n  // When the authority component is absent the URL starts with a path\n  // component.\n  //\n  if (\n    extracted.protocol === 'file:' && (\n      extracted.slashesCount !== 2 || windowsDriveLetter.test(address)) ||\n    (!extracted.slashes &&\n      (extracted.protocol ||\n        extracted.slashesCount < 2 ||\n        !isSpecial(url.protocol)))\n  ) {\n    instructions[3] = [/(.*)/, 'pathname'];\n  }\n\n  for (; i < instructions.length; i++) {\n    instruction = instructions[i];\n\n    if (typeof instruction === 'function') {\n      address = instruction(address, url);\n      continue;\n    }\n\n    parse = instruction[0];\n    key = instruction[1];\n\n    if (parse !== parse) {\n      url[key] = address;\n    } else if ('string' === typeof parse) {\n      index = parse === '@'\n        ? address.lastIndexOf(parse)\n        : address.indexOf(parse);\n\n      if (~index) {\n        if ('number' === typeof instruction[2]) {\n          url[key] = address.slice(0, index);\n          address = address.slice(index + instruction[2]);\n        } else {\n          url[key] = address.slice(index);\n          address = address.slice(0, index);\n        }\n      }\n    } else if ((index = parse.exec(address))) {\n      url[key] = index[1];\n      address = address.slice(0, index.index);\n    }\n\n    url[key] = url[key] || (\n      relative && instruction[3] ? location[key] || '' : ''\n    );\n\n    //\n    // Hostname, host and protocol should be lowercased so they can be used to\n    // create a proper `origin`.\n    //\n    if (instruction[4]) url[key] = url[key].toLowerCase();\n  }\n\n  //\n  // Also parse the supplied query string in to an object. If we're supplied\n  // with a custom parser as function use that instead of the default build-in\n  // parser.\n  //\n  if (parser) url.query = parser(url.query);\n\n  //\n  // If the URL is relative, resolve the pathname against the base URL.\n  //\n  if (\n      relative\n    && location.slashes\n    && url.pathname.charAt(0) !== '/'\n    && (url.pathname !== '' || location.pathname !== '')\n  ) {\n    url.pathname = resolve(url.pathname, location.pathname);\n  }\n\n  //\n  // Default to a / for pathname if none exists. This normalizes the URL\n  // to always have a /\n  //\n  if (url.pathname.charAt(0) !== '/' && isSpecial(url.protocol)) {\n    url.pathname = '/' + url.pathname;\n  }\n\n  //\n  // We should not add port numbers if they are already the default port number\n  // for a given protocol. As the host also contains the port number we're going\n  // override it with the hostname which contains no port number.\n  //\n  if (!required(url.port, url.protocol)) {\n    url.host = url.hostname;\n    url.port = '';\n  }\n\n  //\n  // Parse down the `auth` for the username and password.\n  //\n  url.username = url.password = '';\n\n  if (url.auth) {\n    index = url.auth.indexOf(':');\n\n    if (~index) {\n      url.username = url.auth.slice(0, index);\n      url.username = encodeURIComponent(decodeURIComponent(url.username));\n\n      url.password = url.auth.slice(index + 1);\n      url.password = encodeURIComponent(decodeURIComponent(url.password))\n    } else {\n      url.username = encodeURIComponent(decodeURIComponent(url.auth));\n    }\n\n    url.auth = url.password ? url.username +':'+ url.password : url.username;\n  }\n\n  url.origin = url.protocol !== 'file:' && isSpecial(url.protocol) && url.host\n    ? url.protocol +'//'+ url.host\n    : 'null';\n\n  //\n  // The href is just the compiled result.\n  //\n  url.href = url.toString();\n}\n\n/**\n * This is convenience method for changing properties in the URL instance to\n * insure that they all propagate correctly.\n *\n * @param {String} part          Property we need to adjust.\n * @param {Mixed} value          The newly assigned value.\n * @param {Boolean|Function} fn  When setting the query, it will be the function\n *                               used to parse the query.\n *                               When setting the protocol, double slash will be\n *                               removed from the final url if it is true.\n * @returns {URL} URL instance for chaining.\n * @public\n */\nfunction set(part, value, fn) {\n  var url = this;\n\n  switch (part) {\n    case 'query':\n      if ('string' === typeof value && value.length) {\n        value = (fn || qs.parse)(value);\n      }\n\n      url[part] = value;\n      break;\n\n    case 'port':\n      url[part] = value;\n\n      if (!required(value, url.protocol)) {\n        url.host = url.hostname;\n        url[part] = '';\n      } else if (value) {\n        url.host = url.hostname +':'+ value;\n      }\n\n      break;\n\n    case 'hostname':\n      url[part] = value;\n\n      if (url.port) value += ':'+ url.port;\n      url.host = value;\n      break;\n\n    case 'host':\n      url[part] = value;\n\n      if (port.test(value)) {\n        value = value.split(':');\n        url.port = value.pop();\n        url.hostname = value.join(':');\n      } else {\n        url.hostname = value;\n        url.port = '';\n      }\n\n      break;\n\n    case 'protocol':\n      url.protocol = value.toLowerCase();\n      url.slashes = !fn;\n      break;\n\n    case 'pathname':\n    case 'hash':\n      if (value) {\n        var char = part === 'pathname' ? '/' : '#';\n        url[part] = value.charAt(0) !== char ? char + value : value;\n      } else {\n        url[part] = value;\n      }\n      break;\n\n    case 'username':\n    case 'password':\n      url[part] = encodeURIComponent(value);\n      break;\n\n    case 'auth':\n      var index = value.indexOf(':');\n\n      if (~index) {\n        url.username = value.slice(0, index);\n        url.username = encodeURIComponent(decodeURIComponent(url.username));\n\n        url.password = value.slice(index + 1);\n        url.password = encodeURIComponent(decodeURIComponent(url.password));\n      } else {\n        url.username = encodeURIComponent(decodeURIComponent(value));\n      }\n  }\n\n  for (var i = 0; i < rules.length; i++) {\n    var ins = rules[i];\n\n    if (ins[4]) url[ins[1]] = url[ins[1]].toLowerCase();\n  }\n\n  url.auth = url.password ? url.username +':'+ url.password : url.username;\n\n  url.origin = url.protocol !== 'file:' && isSpecial(url.protocol) && url.host\n    ? url.protocol +'//'+ url.host\n    : 'null';\n\n  url.href = url.toString();\n\n  return url;\n}\n\n/**\n * Transform the properties back in to a valid and full URL string.\n *\n * @param {Function} stringify Optional query stringify function.\n * @returns {String} Compiled version of the URL.\n * @public\n */\nfunction toString(stringify) {\n  if (!stringify || 'function' !== typeof stringify) stringify = qs.stringify;\n\n  var query\n    , url = this\n    , host = url.host\n    , protocol = url.protocol;\n\n  if (protocol && protocol.charAt(protocol.length - 1) !== ':') protocol += ':';\n\n  var result =\n    protocol +\n    ((url.protocol && url.slashes) || isSpecial(url.protocol) ? '//' : '');\n\n  if (url.username) {\n    result += url.username;\n    if (url.password) result += ':'+ url.password;\n    result += '@';\n  } else if (url.password) {\n    result += ':'+ url.password;\n    result += '@';\n  } else if (\n    url.protocol !== 'file:' &&\n    isSpecial(url.protocol) &&\n    !host &&\n    url.pathname !== '/'\n  ) {\n    //\n    // Add back the empty userinfo, otherwise the original invalid URL\n    // might be transformed into a valid one with `url.pathname` as host.\n    //\n    result += '@';\n  }\n\n  //\n  // Trailing colon is removed from `url.host` when it is parsed. If it still\n  // ends with a colon, then add back the trailing colon that was removed. This\n  // prevents an invalid URL from being transformed into a valid one.\n  //\n  if (host[host.length - 1] === ':' || (port.test(url.hostname) && !url.port)) {\n    host += ':';\n  }\n\n  result += host + url.pathname;\n\n  query = 'object' === typeof url.query ? stringify(url.query) : url.query;\n  if (query) result += '?' !== query.charAt(0) ? '?'+ query : query;\n\n  if (url.hash) result += url.hash;\n\n  return result;\n}\n\nUrl.prototype = { set: set, toString: toString };\n\n//\n// Expose the URL parser and some additional properties that might be useful for\n// others or testing.\n//\nUrl.extractProtocol = extractProtocol;\nUrl.location = lolcation;\nUrl.trimLeft = trimLeft;\nUrl.qs = qs;\n\nmodule.exports = Url;\n","import Url from 'url-parse';\n\nimport { Backend } from './backend';\nimport log from './log';\nimport { InitBackend, Options } from './types';\nimport XAPI from './xapi';\n\nexport const globalDefaults: Options = {\n  command: '',\n  host: '',\n  loglevel: 'warn',\n  password: '',\n  port: 0,\n  protocol: '',\n  username: 'admin',\n};\n\nexport interface Connect<T extends XAPI> {\n  (options: Partial<Options>): T;\n  (url: string, options?: Partial<Options>): T;\n}\n\nfunction resolveOptions(\n  targetDefaults: Partial<Options>,\n  url: string,\n  options: Options,\n): Options {\n  const realOpts: Options = {\n    ...globalDefaults,\n    ...targetDefaults,\n  };\n\n  const urlWithProto = url.match(/^\\w+:\\/\\//)\n    ? url\n    : `${realOpts.protocol}//${url}`;\n  const parsedUrl = new Url(urlWithProto);\n\n  Object.keys(realOpts).forEach((key) => {\n    const value = [\n      (options as any)[key],\n      key === 'host' ? parsedUrl.hostname : (parsedUrl as any)[key],\n    ].filter((v) => !!v)[0];\n    if (value) {\n      (realOpts as any)[key] = value;\n    }\n  });\n\n  return realOpts;\n}\n\nexport default function connectOverload<T extends XAPI>(\n  initBackend: InitBackend,\n  defaults: Partial<Options>,\n): (XAPI: new (backend: Backend) => T) => Connect<T> {\n  return (xapi) => (...args: any[]) => {\n    let url: string;\n    let options: Options;\n\n    if (args.length === 1 && typeof args[0] === 'object') {\n      options = args[0];\n      url = '';\n    } else if (args.length === 1 && typeof args[0] === 'string') {\n      options = globalDefaults;\n      url = args[0];\n    } else if (args.length === 2) {\n      url = args[0];\n      options = args[1];\n    } else {\n      throw new Error(`Invalid arguments to connect`);\n    }\n\n    const opts = resolveOptions(defaults, url, options);\n\n    log.setLevel(opts.loglevel);\n    log.debug('using options:', opts);\n    log.info('connecting to', url);\n\n    const backend = initBackend(opts);\n    return new xapi(backend);\n  };\n}\n","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar isArray = require('isarray')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : typedArraySupport()\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nexports.kMaxLength = kMaxLength()\n\nfunction typedArraySupport () {\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\n    return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length)\n    }\n    that.length = length\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    })\n  }\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe (that, size) {\n  assertSize(size)\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  that = createBuffer(that, length)\n\n  var actual = that.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual)\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  that = createBuffer(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array)\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset)\n  } else {\n    array = new Uint8Array(array, byteOffset, length)\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array)\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    that = createBuffer(that, len)\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len)\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString())\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n","import Url from 'url-parse';\n\nimport { Buffer } from 'buffer';\nimport { Options } from '../types';\n\nexport type CreateWebSocket = (url: string, auth: string) => WebSocket;\n\nfunction base64Enc(input: string) {\n  return (typeof btoa === 'function')\n    ? btoa(input)\n    : Buffer.from(input).toString('base64');\n}\n\nfunction generateAuthSubProto(username: string, password: string): string {\n  const replaceChars: any = { '+': '-', '/': '_', '=': '' };\n  const authHash = Buffer\n    .from(`${username}:${password}`)\n    .toString('base64')\n    .replace(/[/+=]/g, (c) => replaceChars[c]);\n  return `auth-${authHash}`;\n}\n\nexport default function websocketConnect(createWebSocket: CreateWebSocket, opts: Options) {\n  const { host, username, password, port, protocol } = opts;\n  const url = new Url('');\n  url.set('pathname', '/ws');\n  url.set('host', host);\n  url.set('protocol', protocol);\n  url.set('port', `${port}`);\n\n  const auth = generateAuthSubProto(username, password);\n  return createWebSocket(url.href, auth);\n}\n","import { NormalizedPath, Path } from './types';\n\n/**\n * Normalizes a path by turning it into an Array of strings.\n * Removes empty parts of the path and ignores redundant whitespace or\n * slashes. Each path element is also capitalized.\n *\n * @param path Array or string path to normalize.\n * @return Array of path segments.\n */\nexport default function normalizePath(path: Path): NormalizedPath {\n  const split = Array.isArray(path) ? path : path.match(/(\\w+)/g);\n  return !split\n    ? []\n    : split.map((element) => {\n        if (/^\\d+$/.test(element)) {\n          return parseInt(element, 10);\n        }\n        return element.charAt(0).toUpperCase() + element.slice(1);\n      });\n}\n","export const UNKNOWN_ERROR = 0;\nexport const COMMAND_ERROR = 1;\nexport const ILLEGAL_VALUE = 2;\nexport const INVALID_PATH = 3;\nexport const PARAMETER_ERROR = 4;\nexport const INVALID_RESPONSE = 5;\nexport const INVALID_STATUS = 6;\nexport const METHOD_NOT_FOUND = -32601;\n\nexport class XAPIError extends Error {\n  public data?: any;\n\n  constructor(readonly code: number, reason: string, data?: any) {\n    super(reason);\n    Object.setPrototypeOf(this, XAPIError.prototype);\n    if (data !== undefined) {\n      this.data = data;\n    }\n\n    if (typeof reason !== 'string') {\n      throw new Error('Reason for XAPIError must be a string');\n    }\n\n    if (typeof code !== 'number') {\n      throw new Error('Error code for XAPIError must be a number');\n    }\n  }\n}\n\nexport class IllegalValueError extends XAPIError {\n  constructor(reason: string) {\n    super(ILLEGAL_VALUE, reason);\n    Object.setPrototypeOf(this, IllegalValueError.prototype);\n  }\n}\n\nexport class InvalidPathError extends XAPIError {\n  constructor(reason: string, xpath: string) {\n    super(INVALID_PATH, reason, { xpath });\n    Object.setPrototypeOf(this, InvalidPathError.prototype);\n  }\n}\n\nexport class ParameterError extends XAPIError {\n  constructor() {\n    super(PARAMETER_ERROR, 'Invalid or missing parameters');\n    Object.setPrototypeOf(this, ParameterError.prototype);\n  }\n}\n","import {\n  IllegalValueError,\n  INVALID_RESPONSE,\n  INVALID_STATUS,\n  InvalidPathError,\n  ParameterError,\n  UNKNOWN_ERROR,\n  XAPIError,\n} from './exc';\nimport { XapiRequest } from './types';\n\nconst scalars = ['number', 'string'];\nconst isScalar = (value: any) => scalars.indexOf(typeof value) >= 0;\n\nconst VERSION = '2.0';\n\n/*\n * Collapse \"Value\" into parent + skip lowercase props\n */\nexport function collapse(data: any): any {\n  if (Array.isArray(data)) {\n    return data.map(collapse);\n  }\n  if (isScalar(data)) {\n    return data;\n  }\n  if ({}.hasOwnProperty.call(data, 'Value') && isScalar(data.Value)) {\n    return data.Value;\n  }\n\n  const result: { [idx: string]: any } = {};\n\n  Object.keys(data).forEach((key) => {\n    result[key] = collapse(data[key]);\n  });\n\n  return result;\n}\n\nexport function createRequest(id: string | null, method: string, params: any) {\n  const request: XapiRequest = { jsonrpc: VERSION, method };\n\n  if (id) {\n    request.id = id;\n  }\n\n  if (params) {\n    request.params = {};\n\n    Object.keys(params).forEach((key) => {\n      const value = params[key];\n\n      if (\n        key !== 'body' &&\n        typeof value === 'string' &&\n        value.indexOf('\\n') !== -1\n      ) {\n        throw new Error('Parameters may not contain newline characters');\n      }\n\n      request.params[key] = params[key];\n    });\n  }\n\n  return request;\n}\n\nexport function createResponse(id: string, result: any) {\n  return { jsonrpc: VERSION, id, result };\n}\n\nexport function createErrorResponse(id: string, error: any) {\n  let payload: { [idx: string]: any };\n\n  if (error instanceof XAPIError) {\n    payload = {\n      code: error.code,\n      message: error.message,\n    };\n  } else {\n    payload = {\n      code: UNKNOWN_ERROR,\n      message: (error.message || error).toString(),\n    };\n  }\n\n  if ({}.hasOwnProperty.call(error, 'data')) {\n    payload.data = error.data;\n  }\n\n  return { jsonrpc: VERSION, id, error: payload };\n}\n\nexport function parseFeedbackResponse(response: any) {\n  return collapse(response);\n}\n\nfunction assertResponseSuccess(response: any): any  {\n  const keys = Object.keys(response).filter((k) => k !== 'ResultId');\n  if (keys.length > 1) {\n    throw new XAPIError(\n      INVALID_RESPONSE,\n      `Invalid command response: Wrong number of keys (${keys.length})`,\n    );\n  }\n\n  if ({}.hasOwnProperty.call(response, 'CommandResponse')) {\n    return assertResponseSuccess(response.CommandResponse);\n  }\n\n  const root = response[keys[0]];\n  if (!root || !{}.hasOwnProperty.call(root, 'status')) {\n    return root;\n  }\n\n  switch (root.status) {\n    case 'Error': {\n      const body = collapse(root);\n      const { Error, Reason, XPath } = body;\n      const reason = Error || Reason || keys[0];\n\n      if (XPath) {\n        throw new InvalidPathError(reason, XPath);\n      }\n\n      throw new XAPIError(UNKNOWN_ERROR, reason, body);\n    }\n    case 'ParameterError':\n      throw new ParameterError();\n    case 'OK':\n      return root;\n    default:\n      throw new XAPIError(\n        INVALID_STATUS,\n        `Invalid command status: ${root.status}`,\n      );\n  }\n}\n\nfunction assertValidCommandResponse(response: any) {\n  if (!{}.hasOwnProperty.call(response, 'CommandResponse')) {\n    throw new XAPIError(\n      INVALID_RESPONSE,\n      'Invalid command response: Missing \"CommandResponse\" attribute',\n    );\n  }\n\n  return assertResponseSuccess(response);\n}\n\nexport function createCommandResponse(response: any) {\n  const root = assertValidCommandResponse(response);\n  const collapsed = collapse(root);\n  return Object.keys(collapsed).length ? collapsed : null;\n}\n\nfunction digObj(path: (string | number)[], obj: any) {\n  const parts = path.slice();\n  let value = obj;\n\n  while (parts.length) {\n    const part = parts.shift()!;\n    if (Array.isArray(value)) {\n      value = value.find((v) => parseInt(v.id, 10) === part);\n    } else if (!{}.hasOwnProperty.call(value, part)) {\n      return undefined;\n    } else {\n      value = value[part];\n    }\n  }\n\n  return value;\n}\n\nexport function createDocumentResponse(request: any, response: any) {\n  const { Path, Type } = request.params;\n  const isSchema = Type === 'Schema';\n  const path = [...Path];\n  const document = path[0].toLowerCase();\n\n  // Shim document/query inconsistencies\n  if (isSchema && 'status'.startsWith(document)) {\n    path[0] = 'StatusSchema';\n  } else if ('configuration'.startsWith(document)) {\n    path[0] = 'Configuration';\n  }\n\n  return digObj(path, response);\n}\n\nexport function createGetResponse(request: any, response: any) {\n  if ({}.hasOwnProperty.call(response, 'CommandResponse')) {\n    assertResponseSuccess(response.CommandResponse);\n  } else {\n    assertResponseSuccess(response);\n  }\n\n  return digObj(request.params.Path, collapse(response));\n}\n\nexport function createSetResponse(request: any, response: any) {\n  if ({}.hasOwnProperty.call(response, 'CommandResponse')) {\n    assertResponseSuccess(response.CommandResponse);\n  } else {\n    assertResponseSuccess(response);\n  }\n\n  if (Object.keys(response).length > 1) {\n    const leaf = digObj(request.params.Path, response);\n    if (leaf.error === 'True') {\n      throw new IllegalValueError(leaf.Value);\n    }\n  }\n  return null;\n}\n","/*\n * DO NOT WRITE OR UPDATE THIS FILE!\n * This file was automatically generated at: 2024-11-22T12:12:47.125Z\n */\nconst VERSION = '6.0.0';\nexport default VERSION;\n","import XAPI from '.';\nimport { Registration } from './feedback';\nimport normalizePath from './normalizePath';\nimport { Listener, Path } from './types';\n\nexport type AnyConstructor<T = object> = new (...args: any[]) => T;\n\n/**\n * Common base class for XAPI section types (commands, configs, events, statuses).\n */\nexport class Component {\n  /**\n   * Prefix to add to all paths for the component.\n   */\n  public prefix = '';\n\n  constructor(public readonly xapi: XAPI) {}\n\n  /**\n   * Normalizes a path including the component prefix.\n   *\n   * @param path Path to normalize.\n   * @return Normalized path.\n   */\n  public normalizePath(path: Path) {\n    const normalized = normalizePath(path);\n    const { prefix } = this;\n    return !prefix\n      ? normalized\n      : ([prefix] as (string | number)[]).concat(normalized);\n  }\n}\n\n/**\n * Mixin for XAPI sections that can trigger feedback.\n */\nexport interface Listenable<T> {\n    on(path: Path, listener: Listener<T>): Registration;\n    once(path: Path, listener: Listener<T>): Registration;\n    off(): void;\n}\n\nexport function Listenable<B extends AnyConstructor<Component>, T = any>(Base: B)\n  : B & AnyConstructor<Listenable<T>>\n{\n  return class Child extends Base implements Listenable<T> {\n    /**\n     * Register a new listener on the given path.\n     *\n     * @param path Path to XAPI entry.\n     * @param listener Callback handler called on changes.\n     * @typeparam T Event type.\n     * @return Handler to deregister the feedback registration.\n     */\n    public on(path: Path, listener: Listener<T>) {\n      return this.xapi.feedback.on(this.normalizePath(path) as any, listener);\n    }\n\n    /**\n     * Register a new listener on the given path, de-register\n     * after the first change happened.\n     *\n     * @param path Path to XAPI entry.\n     * @param listener Callback handler called on changes.\n     * @typeparam T Event type.\n     * @return Handler to deregister the feedback registration.\n     */\n    public once(path: Path, listener: Listener<T>) {\n      return this.xapi.feedback.once(this.normalizePath(path) as any, listener);\n    }\n\n    /**\n     * De-register the given listener on the given path.\n     *\n     * @deprecated Use deactivation handler from `.on()` and `.once()` instead.\n     */\n    public off() {\n      this.xapi.feedback.off();\n    }\n  };\n}\n\nexport interface Gettable<T> {\n    get(path: Path): Promise<T>;\n}\n\n/**\n * Mixin for XAPI sections that can hold a value that may be fetched.\n */\nexport function Gettable<B extends AnyConstructor<Component>, T = any>(Base: B)\n  : B & AnyConstructor<Gettable<T>>\n{\n  return class Child extends Base implements Gettable<T> {\n    /**\n     * Gets the value of the given path.\n     *\n     * ```typescript\n     * xapi.status\n     *   .get('Audio Volume')\n     *   .then((volume) => { console.log(volume); });\n     * ```\n     *\n     * ```typescript\n     * xapi.config\n     *   .get('Audio DefaultVolume')\n     *   .then((volume) => { console.log(volume); });\n     * ```\n     *\n     * @param path Path to configuration node.\n     * @typeparam T The return type of the get request.\n     * @return Resolved to the configuration value when ready.\n     */\n    public get(path: Path): Promise<T> {\n      return this.xapi.execute('xGet', {\n        Path: this.normalizePath(path),\n      });\n    }\n  };\n}\n\nexport interface Settable<T> {\n  set(path: Path, value: T): Promise<unknown>;\n}\n\n/**\n * Mixin for XAPI sections that can hold a value that may be fetched.\n */\nexport function Settable<B extends AnyConstructor<Component>, T = number | string>(Base: B)\n  : B & AnyConstructor<Settable<T>>\n{\n  return class Child extends Base implements Settable<T> {\n    /**\n     * Sets the path to the given value.\n     *\n     * ```typescript\n     * xapi\n     *   .config.set('SystemUnit Name', 'My System');\n     * ```\n     *\n     * @param path Path to status node.\n     * @param value Configuration value.\n     * @return Resolved to the status value when ready.\n     */\n    public set(path: Path, value: T) {\n      return this.xapi.execute('xSet', {\n        Path: this.normalizePath(path),\n        Value: value,\n      });\n    }\n  };\n}\n","import { Registration } from './feedback';\nimport { Component, Gettable, Listenable, Settable } from './mixins';\nimport { Listener, Path } from './types';\n\n/**\n * Interface to XAPI configurations.\n */\nexport class Config extends Listenable(Settable(Gettable(Component))) {\n  public prefix = 'Configuration';\n\n  // fake mixins\n  public normalizePath!: (path: Path) => (string | number)[];\n\n  public on!: <T = any>(path: Path, listener: Listener<T>) => Registration;\n  public once!: <T = any>(path: Path, listener: Listener<T>) => Registration;\n  public off!: () => void;\n\n  public get!: <T = any>(path: Path) => Promise<T>;\n  public set!: (path: Path, value: number | string) => Promise<any>;\n}\n\n/**\n * Interface to XAPI events.\n */\nexport class Event extends Listenable(Component) {\n  public prefix = 'Event';\n\n  // fake mixins\n  public normalizePath!: (path: Path) => (string | number)[];\n\n  public on!: <T = any>(path: Path, listener: Listener<T>) => Registration;\n  public once!: <T = any>(path: Path, listener: Listener<T>) => Registration;\n  public off!: () => void;\n}\n\n/**\n * Interface to XAPI statuses.\n */\nexport class Status extends Listenable(Gettable(Component)) {\n  public prefix = 'Status';\n\n  // fake mixins\n  public normalizePath!: (path: Path) => (string | number)[];\n\n  public on!: <T = any>(path: Path, listener: Listener<T>) => Registration;\n  public once!: <T = any>(path: Path, listener: Listener<T>) => Registration;\n  public off!: () => void;\n\n  public get!: <T = any>(path: Path) => Promise<T>;\n}\n","import { EventEmitter } from 'events';\n\nimport log from '../log';\n\nimport XAPI from '.';\nimport normalizePath from './normalizePath';\nimport { Handler, Listener, Path } from './types';\n\n/**\n * A function used to inspect and emit feedback data.\n *\n * The interceptor is free to change feedback payloads or discard them\n * entirely.\n */\nexport type FeedbackInterceptor =\n  /**\n   * @param payload The feedback payload.\n   * @param emit Function to dispatch a payload.\n   */\n  (payload: any, emit: (payload: any) => void) => void;\n\n/**\n * Type representing a feedback id.\n */\nexport interface FeedbackId {\n  Id: number;\n}\n\n/**\n * Type for a feedback registration request.\n */\nexport interface Registration {\n  /**\n   * De-register the feedback registration.\n   */\n  (): void;\n\n  /**\n   * Promise resolved with a feedback id on successful registration.\n   */\n  registration: Promise<FeedbackId>;\n}\n\n/**\n * Group feedback deregister handlers for bookkeeping.\n */\nexport class FeedbackGroup {\n  private handlers: Handler[];\n\n  constructor(handlers: Handler[]) {\n    this.handlers = handlers;\n  }\n\n  /**\n   * Add a deregister handler function to the feedback group.\n   *\n   * @param handler - Handler to add to the group.\n   * @return - this for chaining.\n   */\n  public add(handler: Handler) {\n    this.handlers.push(handler);\n    return this;\n  }\n\n  /**\n   * Remove a deregister handler function from the feedback group.\n   *\n   * @param handler - Handler to remove from the group.\n   * @return - this for chaining.\n   */\n  public remove(handler: Handler) {\n    this.handlers = this.handlers.filter((h) => h !== handler);\n    return this;\n  }\n\n  /**\n   * Call the deregister handler functions associated with this group.\n   *\n   * @return - this for chaining.\n   */\n  public off() {\n    this.handlers.forEach((handler) => {\n      handler();\n    });\n    this.handlers = [];\n    return this;\n  }\n}\n\nfunction defaultInterceptor<T>(payload: T, emit: (payload: T) => void) {\n  emit(payload);\n}\n\nfunction dispatch(\n  feedback: Feedback,\n  data: any,\n  root = data,\n  path: string[] = [],\n) {\n  if (Array.isArray(data)) {\n    data.forEach((child) => {\n      dispatch(feedback, child, root, path);\n      dispatch(feedback, child, root, path.concat(child.id));\n    });\n    return;\n  }\n\n  const emitPath = path.join('/').toLowerCase();\n  feedback.eventEmitter.emit(emitPath, data, root, root.Id);\n\n  if (typeof data === 'object') {\n    Object.keys(data).forEach((key) => {\n      dispatch(feedback, data[key], root, path.concat(key));\n    });\n  }\n}\n\n/**\n * Feedback handler for the XAPI.\n *\n * ### Register a feedback listener\n *\n * ```typescript\n * xapi.feedback.on('Status/Audio/Volume', data => {\n *   console.log(`Received feedback data: ${data}`);\n * });\n * ```\n *\n * ### Get the feedback root payload\n *\n * ```typescript\n * xapi.feedback.on('Status/Audio/Volume', (data, payload) => {\n *   console.log(`System volume changed to: ${data}`);\n *   JSON.stringify(payload) // => { Status: { Audio: { Volume: data } } }\n * });\n * ```\n *\n * ### Listen to array elements\n *\n * ```typescript\n * xapi.feedback.on('Status/Call[42]/Status', callStatus => {\n *   console.log(`Call status for call number 42 is: ${callStatus}`);\n * });\n * ```\n *\n * ### Bundle feedback listeners for easy unsubscription\n *\n * ```typescript\n * const feedbackGroup = xapi.feedback.group([\n *   xapi.status.on('Audio/Volume', volumeListener),\n *   xapi.status.on('Call', callListener),\n * ]);\n *\n * // Disable feedback listening for all listeners of the group.\n * feedbackGroup.off();\n * ```\n *\n * ### Register listener with Array path\n *\n * ```typescript\n * const off = xapi.feedback.on('Status/Audio/Volume', listener);\n * off(); // De-register feedback\n * ```\n */\nexport default class Feedback {\n  /**\n   * @param xapi XAPI instance.\n   * @param interceptor Feedback interceptor.\n   */\n  public readonly eventEmitter = new EventEmitter();\n  constructor(readonly xapi: XAPI, readonly interceptor: FeedbackInterceptor = defaultInterceptor) {}\n\n  /**\n   * Registers a feedback listener with the backend service which is invoked\n   * when there is feedback matching the subscription query.\n   *\n   * @param path Path to subscribe to.\n   * @param listener Listener invoked on feedback.\n   * @return Feedback cancellation function.\n   */\n  public on(path: Path, listener: Listener): Registration {\n    log.info(`new feedback listener on: ${path}`);\n    const eventPath = normalizePath(path)\n      .join('/')\n      .toLowerCase();\n\n    const registration = this.xapi.execute<FeedbackId>('xFeedback/Subscribe', {\n      Query: normalizePath(path),\n    });\n\n    let wrapper: <T = any>(ev: T, root: any, id?: number) => void;\n\n    const idP = registration.then(({ Id }) => {\n      wrapper = (ev, root, id) => {\n        if (typeof id !== 'undefined' && id !== Id) {\n          return;\n        }\n        listener(ev, root);\n      };\n      this.eventEmitter.on(eventPath, wrapper);\n      return Id;\n    });\n\n    const off = () => {\n      if (!wrapper) {\n        return;\n      }\n\n      idP.then((Id) => {\n        this.xapi.execute('xFeedback/Unsubscribe', { Id });\n      });\n\n      this.eventEmitter.removeListener(eventPath, wrapper);\n    };\n\n    off.registration = registration;\n    return off;\n  }\n\n  /**\n   * Registers a feedback listener similar to {@link on}, but the subscription\n   * is removed after the first invocation of the listener.\n   *\n   * @param path Path to subscribe to.\n   * @param listener Listener invoked on feedback.\n   * @return Feedback cancellation function.\n   */\n  public once<T = any>(path: Path, listener: Listener): Registration {\n    let off: Registration;\n    const wrapped = (ev: T, root: any) => {\n      if (typeof off === 'function') {\n        off();\n      }\n      listener.call(this, ev, root);\n    };\n    wrapped.listener = listener;\n    off = this.on(path, wrapped);\n    return off;\n  }\n\n  /**\n   * Remove feedback registration.\n   *\n   * @deprecated use deactivation handler from `.on()` and `.once()` instead.\n   */\n  public off() {\n    throw new Error(\n      '.off() is deprecated. Use return value deactivate handler from .on() instead.',\n    );\n  }\n\n  /**\n   * Dispatches feedback data to the registered handlers.\n   *\n   * @param data JSON data structure of feedback data.\n   * @return Returns self for chaining.\n   */\n  public dispatch(data: any) {\n    this.interceptor(data, (d = data) => dispatch(this, d));\n    return this;\n  }\n\n  /**\n   * Creates a grouper object which tracks which tracks the feedback paths and\n   * listeners being added to it.\n   *\n   * ### Bundle feedback listeners for easy unsubscription\n   *\n   * ```typescript\n   * // Create a group\n   * const group = xapi.feedback.group([\n   *   xapi.status.on('Audio Volume', (volume) => {\n   *     // ...\n   *   }),\n   *   xapi.config.on('Audio DefaultVolume', (volume) => {\n   *     // ...\n   *   }),\n   * ]);\n   *\n   * const handler = xapi.status.on('Call', (call) => { ... });\n   *\n   * // Add handler to the group\n   * group.add(handler);\n   *\n   * // Remove handler from the group\n   * group.remove(handler);\n   *\n   * // Unregister from all feedback handlers\n   * group.off();\n   * ```\n   *\n   * @return Proxy object for xapi.feedback.\n   */\n  public group(handlers: Handler[]) {\n    return new FeedbackGroup(handlers);\n  }\n}\n","// Proxy types inspired by:\n// https://www.typescriptlang.org/docs/handbook/advanced-types.html\n\nconst ACTIONS = ['get', 'set', 'on', 'once'];\n\nexport default function createProxy(thisArg: any, root: any, path: string[] = []): any {\n  const handlers = {\n    apply(target: any, _: any, args: any[]) {\n      if (typeof root === 'function') {\n        return root.call(thisArg, path.join('/'), ...args);\n      }\n      throw new TypeError(`Object is not callable: ${root}`);\n    },\n\n    get(target: any, property: string) {\n      if (ACTIONS.includes(property)) {\n        if (typeof root[property] !== 'function') {\n          throw new TypeError(`Property is not callable: ${root}[${property}]`);\n        }\n        return (...args: any[]) => root[property](path.join('/'), ...args);\n      }\n\n      return createProxy(thisArg, root, path.concat(property));\n    },\n  };\n\n  return new Proxy(root, handlers);\n}\n","import { EventEmitter } from 'events';\n\nimport log from '../log';\nimport normalizePath from './normalizePath';\nimport * as rpc from './rpc';\n\nimport { Backend } from '../backend';\nimport version from '../version';\nimport { Config, Event, Status } from './components';\nimport Feedback from './feedback';\nimport createXapiProxy from './proxy';\nimport { Path, XapiError, XapiOptions, XapiResponse } from './types';\n\nexport interface Requests {\n  [idx: string]: {\n    resolve(result: any): void;\n    reject(result: XapiError): void;\n  };\n}\n\nexport declare interface XAPI {\n  on(event: 'error', listener: (error: Error) => void): this;\n  on(event: 'ready', listener: (xapi: XAPI) => void): this;\n  on(event: string, listener: () => void): this;\n}\n\n/**\n * User-facing API towards the XAPI. Requires a backend for communicating\n * with an XAPI instance. It should be possible to write backends for all kinds\n * of transports (TSH over SSH, Websockets, HTTP, plain sockets, etc.)\n *\n * ### Initialization\n *\n * ```typescript\n * const xapi = new XAPI(backend);\n * ```\n *\n * ### Invoke command\n *\n * ```typescript\n * xapi\n *   .command('Dial', { Number: 'johndoe@example.com' })\n *   .then(onSuccess, onFailure);\n *\n * // Alternate notation\n * xapi\n *   .Command.Dial({ Number: 'johndoe@example.com' })\n *   .then(onSuccess, onFailure);\n * ```\n *\n * ### Fetch a configuration\n *\n * ```typescript\n * xapi\n *   .config.get('Audio DefaultVolume')\n *   .then((volume) => console.log(`default volume is: ${volume}`));\n *\n * // Alternate notation\n * xapi.Audio.DefaultVolume\n *   .get()\n *   .then((volume) => console.log(`default volume is: ${volume}`));\n * ```\n *\n * ### Set a configuration\n *\n * ```typescript\n * xapi.config.set('Audio DefaultVolume', 100);\n *\n * // Alternate notation\n * xapi.Audio.DefaultVolume.set(100);\n * ```\n *\n * ### Fetch a status\n *\n * ```typescript\n * xapi\n *   .status.get('Audio Volume')\n *   .then((volume) => { console.log(`volume is: ${volume}`); });\n *\n * // Alternate notation\n * xapi.Status.Audio.Volume\n *   .get()\n *   .then((volume) => { console.log(`volume is: ${volume}`); });\n * ```\n *\n * ### Listen to an event\n *\n * ```typescript\n * xapi.event.on('Message Send Text', (text) => {\n *   console.log(`Received message text: ${text}`);\n * });\n *\n * // Alternate notation\n * xapi.Event.Message.Send.Text.on((text) => {\n *   console.log(`Received message text: ${text}`);\n * });\n * ```\n */\nexport class XAPI extends EventEmitter {\n  public version: string = version;\n\n  /**\n   * Interface to XAPI feedback registration.\n   */\n  public feedback: Feedback;\n\n  /**\n   * Interface to XAPI configurations.\n   */\n  public config = new Config(this);\n\n  /**\n   * Interface to XAPI events.\n   */\n  public event = new Event(this);\n\n  /**\n   * Interface to XAPI statuses.\n   */\n  public status = new Status(this);\n\n  /**\n   * Proxy for XAPI Status.\n   */\n  public Command: any;\n\n  /**\n   * Proxy for XAPI Status.\n   */\n\n  public Config: any;\n  /**\n   * Proxy for XAPI Status.\n   */\n\n  public Status: any;\n\n  /**\n   * Proxy for XAPI Status.\n   */\n  public Event: any;\n\n  /**\n   * @param backend Backend connected to an XAPI instance.\n   * @param options XAPI object options.\n   */\n\n  private requestId = 1;\n  private requests: Requests = {};\n\n  constructor(\n    private readonly backend: Backend,\n    options: XapiOptions = {}) {\n    super();\n\n    this.feedback = new Feedback(this, options.feedbackInterceptor);\n    this.Command = createXapiProxy(this, this.command);\n    this.Config = createXapiProxy(this, this.config);\n    this.Event = createXapiProxy(this, this.event);\n    this.Status = createXapiProxy(this, this.status);\n\n    // Restrict object mutation\n    if (!options.hasOwnProperty('seal') || options.seal) {\n      Object.defineProperties(this, {\n        Command: { writable: false },\n        Config: { writable: false },\n        Event: { writable: false },\n        Status: { writable: false },\n        config: { writable: false },\n        event: { writable: false },\n        feedback: { writable: false },\n        status: { writable: false },\n      });\n      Object.seal(this);\n    }\n\n    backend\n      .on('close', () => {\n        this.emit('close');\n      })\n      .on('error', (error) => {\n        this.emit('error', error);\n      })\n      .on('ready', () => {\n        this.emit('ready', this);\n      })\n      .on('data', this.handleResponse.bind(this));\n  }\n\n  /**\n   * Close the XAPI connection.\n   */\n  public close(): XAPI {\n    this.backend.close();\n    return this;\n  }\n\n  /**\n   * Executes the command specified by the given path.\n   *\n   * ```typescript\n   * // Space delimited\n   * xapi.command('Presentation Start');\n   *\n   * // Slash delimited\n   * xapi.command('Presentation/Start');\n   *\n   * // Array path\n   * xapi.command(['Presentation', 'Start']);\n   *\n   * // With parameters\n   * xapi.command('Presentation Start', { PresentationSource: 1 });\n   *\n   * // Multi-line\n   * xapi.command('UserInterface Extensions Set', { ConfigId: 'example' }, `\n   *  <Extensions>\n   *    <Version>1.1</Version>\n   *    <Panel item=\"1\" maxOccurrence=\"n\">\n   *      <Icon>Lightbulb</Icon>\n   *      <Type>Statusbar</Type>\n   *      <Page item=\"1\" maxOccurrence=\"n\">\n   *        <Name>Foo</Name>\n   *        <Row item=\"1\" maxOccurrence=\"n\">\n   *          <Name>Bar</Name>\n   *          <Widget item=\"1\" maxOccurrence=\"n\">\n   *            <WidgetId>widget_3</WidgetId>\n   *            <Type>ToggleButton</Type>\n   *          </Widget>\n   *        </Row>\n   *      </Page>\n   *    </Panel>\n   *  </Extensions>\n   * `);\n   * ```\n   *\n   * @param path Path to command node.\n   * @param params Object containing named command arguments.\n   * @param body Multi-line body for commands requiring it.\n   * @return Resolved with the command response when ready.\n   */\n  public command<T = any>(path: Path, params?: object | string, body?: string): Promise<T> {\n    const apiPath = normalizePath(path).join('/');\n    const method = `xCommand/${apiPath}`;\n\n    let executeParams;\n    if (typeof params === 'string' && typeof body === 'undefined') {\n      executeParams = { body: params };\n    } else if ((typeof params === 'object' || !params) && typeof body === 'string') {\n      executeParams = Object.assign({ body }, params);\n    } else {\n      executeParams = params;\n    }\n\n    return this.execute<T>(method, executeParams);\n  }\n\n  /**\n   * Interface to XAPI documents.\n   *\n   * @param path Path to xDocument.\n   * @return xDocument as specified by path.\n   */\n  public doc<T = any>(path: Path) {\n    return this.execute<T>('xDoc', {\n      Path: normalizePath(path),\n      Type: 'Schema',\n    });\n  }\n\n  /**\n   * Execute the given JSON-RPC request on the backend.\n   *\n   * ```typescript\n   * xapi.execute('xFeedback/Subscribe', {\n   *   Query: ['Status', 'Audio'],\n   * });\n   * ```\n   *\n   * @param method Name of RPC method to invoke.\n   * @param params Parameters to add to the request.\n   * @typeparam T Return type.\n   * @return Resolved with the command response.\n   */\n  public execute<T>(method: string, params: any): Promise<T> {\n    return new Promise((resolve, reject) => {\n      const id = this.nextRequestId();\n      const request = rpc.createRequest(id, method, params);\n      this.backend.execute(request);\n      this.requests[id] = { resolve, reject };\n    });\n  }\n\n  private handleResponse(response: XapiResponse) {\n    const { id, method } = response;\n    if (method === 'xFeedback/Event') {\n      log.debug('feedback:', response);\n      this.feedback.dispatch(response.params);\n    } else {\n      if ({}.hasOwnProperty.call(response, 'result')) {\n        log.debug('result:', response);\n        const { resolve } = this.requests[id];\n        resolve(response.result);\n      } else {\n        log.debug('error:', response);\n        const { reject } = this.requests[id];\n        reject(response.error);\n      }\n      delete this.requests[id];\n    }\n  }\n\n  private nextRequestId() {\n    const requestId = this.requestId;\n    this.requestId += 1;\n    return requestId.toString();\n  }\n}\n\nexport default XAPI;\n","import { Backend } from './backend';\nimport WSBackend from './backend/ws';\nimport connectOverload from './connect';\nimport websocketConnect from './transport/ws';\nimport { Options } from './types';\nimport XAPI from './xapi';\n\nexport { default as XAPI } from './xapi';\n\nfunction initBackend(opts: Options) {\n  const { protocol } = opts;\n  switch (protocol) {\n    case '':\n    case 'ws:':\n    case 'wss:': {\n      const createWebSocket = (url: string, auth: string) => {\n        return new WebSocket(url, auth);\n      };\n      const transport = websocketConnect(createWebSocket, opts);\n      return new WSBackend(transport);\n    }\n    default:\n      throw new Error(`Invalid protocol: ${protocol}`);\n  }\n}\n\nexport function connectGen<T extends XAPI>(xapi: new (backend: Backend) => T) {\n  return connectOverload<T>(initBackend, { protocol: 'wss:' })(xapi);\n}\n\n/**\n * Connect to an XAPI endpoint.\n *\n * ```typescript\n * const xapi = connect('ssh://host.example.com:22');\n * ```\n *\n * @param url Connection specification.\n * @param options Connect options.\n * @return XAPI interface connected to the given URI.\n */\nexport const connect = connectGen(XAPI);\n"]}